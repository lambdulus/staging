(this["webpackJsonp@lambdulus/frontend"]=this["webpackJsonp@lambdulus/frontend"]||[]).push([[0],{137:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var o,a,s,r,i,c,l=n(19),u=n(85),d=n.n(u),p=(n(96),n(12)),b=n(6),h=n(0),m=n(1),j=n(14),O=n(4),f=n(5),v=(n(97),n(11)),x=n(16),g=n(2);!function(e){e.UNTYPED_LAMBDA="UNTYPED_LAMBDA",e.LISP="LISP",e.MARKDOWN="MARKDOWN"}(o||(o={})),function(e){e[e.MAIN=0]="MAIN",e[e.HELP=1]="HELP",e[e.SETTINGS=2]="SETTINGS",e[e.NOTEBOOKS=3]="NOTEBOOKS"}(a||(a={})),function(e){e.INIT="Type \u03bb (as \\) expression and hit enter",e.EVAL_MODE="Hit enter for next step",e.VALIDATE_MODE="Write next step and hit enter for validation",e.MACRO="Define Macro like: `NAME := [\u03bb expression]` and hit enter",e.NOTE="Type note and hit shift enter"}(s||(s={})),function(e){e.EMPTY="EMPTY",e.ORDINARY="ORDINARY",e.EXERCISE="EXERCISE"}(r||(r={})),function(e){e[e.CORRECT=0]="CORRECT",e[e.INCORRECT=1]="INCORRECT"}(i||(i={})),function(e){e.NORMAL="Normal Evaluation",e.APPLICATIVE="Applicative Evaluation",e.OPTIMISATION="Optimisation - \u03b7 Conversion",e.ABSTRACTION="Abstraction / Simplified Evaluation"}(c||(c={}));var N=n(15),y=n(25),S=n(31),E=function(){function e(t,n){Object(h.a)(this,e),this.roots=t,this.macrotables=n,this.translator=new Map,this.equals=!0,this.context=void 0;var o=Object(S.a)(t);this.context=o.slice(0),this.compare()}return Object(m.a)(e,[{key:"compare",value:function(){var e=Object(v.a)(this.context,2),t=e[0],n=e[1];if(t instanceof N.Lambda&&n instanceof N.Lambda){var o=new Map(this.translator.entries());this.translator.set(t.argument.name(),n.argument.name()),this.context=[t.right,n.right],this.compare(),this.translator=o}else if(t instanceof N.Application&&n instanceof N.Application){if(this.context=[t.left,n.left],this.compare(),!this.equals)return;this.context=[t.right,n.right],this.compare()}else if(t instanceof N.Macro&&n instanceof N.Macro){if(this.macrotables[0][t.name()]===this.macrotables[1][n.name()])return void(this.equals=!0);this.equals=t.name()===n.name()}else t instanceof N.ChurchNumeral&&n instanceof N.ChurchNumeral?this.equals=t.name()===n.name():t instanceof N.Variable&&n instanceof N.Variable?this.translator.has(t.name())?this.equals=this.translator.get(t.name())===n.name():this.equals=t.name()===n.name():(this.equals=!1,console.log("something is not equal"),console.log(t.toString(),t.type),console.log(n.toString(),n.type))}}]),e}();function k(e,t,n,o){for(var a=new Array(t-e+1),s=0,r=e;r<=t;++r)a[s++]=o(n[r],r);return a}function C(e,t,n){try{window.ga.getAll()[0].send("event",e,t,n)}catch(o){}}var L={macrotable:{}},M="UNTYPED_LAMBDA_CALCULUS",R={type:o.UNTYPED_LAMBDA,SLI:!0,expandStandalones:!1,strategy:c.NORMAL,SDE:!0};function A(e,t){var n=e.reduce((function(e,t){var n=t.split(":="),o=Object(v.a)(n,2),a=o[0],s=o[1];if(0===a.trim().length||0===s.trim().length)throw Error("Invalid Macro definition. Possibly empty Macro definition?");return Object(b.a)(Object(b.a)({},e),{},Object(x.a)({},a,""))}),{});return e.reduce((function(e,o){var a=o.split(":="),s=Object(v.a)(a,2),r=s[0],i=s[1],c=Object(N.tokenize)(i.trim(),{lambdaLetters:["\u03bb"],singleLetterVars:t,macromap:n}),l=Object(N.parse)(c,n);return Object(b.a)(Object(b.a)({},e),{},Object(x.a)({},r.trim(),l.toString()))}),{})}function T(e,t,n,a){return n===r.EMPTY?Object(b.a)(Object(b.a)({},t),{},{__key:Date.now().toString(),type:o.UNTYPED_LAMBDA,subtype:n,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:a,editor:{placeholder:"placeholder",content:e,caretPosition:0,syntaxError:null}}):function(e,t,n,a){var c=t.SDE,l=t.SLI,u=t.strategy,d=[Object.entries(a).map((function(e){var t=Object(v.a)(e,2),n=t[0],o=t[1];return"".concat(n," := ").concat(o)})).join(";\n"),e].join(";\n"),p=a;try{var h=Object(N.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:l,macromap:p}),m=Object(N.parse)(h,p),j={validity:i.CORRECT,userInput:d,message:""},O=!1,f=m.clone();return(c?I(f,u,p)[0]:new(z(u))(f).nextReduction)instanceof N.None&&(O=!0,j.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",m.toString())),C("Submit Expression from Link","submit valid",e),Object(b.a)(Object(b.a)({},t),{},{__key:Date.now().toString(),type:o.UNTYPED_LAMBDA,subtype:n,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,ast:m,expression:d,history:[{ast:m.clone(),lastReduction:new N.None,step:0,message:j,isNormalForm:O,exerciseStep:n===r.EXERCISE}],macrolistOpen:!1,macrotable:p,editor:{content:e,caretPosition:0,placeholder:s.EVAL_MODE,syntaxError:null}})}catch(x){throw C("Submit Expression from Link","submit invalid",e),x}}(e,t,n,a)}function w(e){return function(e){var t=e;if(""===t.expression)return t;var n=Object(N.decodeFast)(t.ast);if(null===n)throw Error("ROOT AST IS NOT DECODABLE");return t.ast=n,t.history=t.history.map((function(e,t){var n=Object(N.decodeFast)(e.ast);if(null===n)throw Error("CURRENT STEP IS NOT DECODABLE "+t);var o=e.lastReduction;return void 0===e.lastReduction&&(o=null),Object(b.a)(Object(b.a)({},e),{},{lastReduction:o,ast:n})})),t}(e)}var B={SLI:!0,expandStandalones:!0,strategy:!0};function I(e,t,n){var o=new(z(t))(e),a=o.nextReduction;if(o.nextReduction instanceof N.None)return[a,function(e){return e}];if(a instanceof N.Expansion&&a.target instanceof N.ChurchNumeral){var s=o.perform(),r=I(s,t,n),i=Object(v.a)(r,1)[0];return i instanceof N.None?[i,function(e){return e}]:[a,function(e){return s}]}if(!(a instanceof N.Expansion&&a.target instanceof N.Macro))return[a,function(e){return o.perform()}];var l=function(){var s,r,i=a.parent,l=a.treeSide,u=a.target.clone(),d=e.clone();r=new(z(t))(d).perform();var p=new(z(t))(r).nextReduction;if(p instanceof N.Expansion)return{v:[p,function(){return o.perform()}]};var b=o.perform(),h=null!==i&&null!==l?i[l].clone():b.clone(),m=I(b,t,n),j=Object(v.a)(m,2),O=j[0],f=j[1];if(O instanceof N.None)return{v:[O,function(e){return e}]};if(O instanceof N.Alpha){var x=I(b=f(b),t,n),S=Object(v.a)(x,2);O=S[0],f=S[1]}if(null!==i&&null!==l&&U(h,O))return{v:[a,function(e){return o.perform()}]};var E=O;if(null!==i&&null!==l&&i instanceof N.Application&&i[l]instanceof N.Lambda&&(null===(s=E.redex)||void 0===s?void 0:s.left.identifier)===i[l].identifier&&O.type===N.ASTReductionType.BETA&&i.identifier===E.redex.identifier){var k=_(i[l]).length,C=function(e){if(["*","+","/","-","^","DELTA","=",">","<",">=","<=","AND","OR"].includes(e))return 2;if(["ZERO","NOT","SUC","PRED"].includes(e))return 1;return null}(u.name());null!==C&&C<=k&&(k=C);var L=function(e,t,n){var o=new V(e,t,n);return new Y(o.applications,o.parents,e)}(k,i,e);if(t===c.APPLICATIVE||["*","+","/","-","^","DELTA","=",">","<",">=","<=","ZERO","NOT","PRED","SUC"].includes(u.name())){var M,R=Object(g.a)(L.applications);try{var A=function(){var e=M.value,o=I(e.right,t,n),a=Object(v.a)(o,2),s=a[0],r=a[1];return s instanceof N.None?"continue":{v:{v:[s,function(t){return e.right=r(e.right),i[l]=u,t}]}}};for(R.s();!(M=R.n()).done;){var T=A();if("continue"!==T&&"object"===typeof T)return T.v}}catch(w){R.e(w)}finally{R.f()}}return{v:[L,function(e){var o,a=null,s=null,r=Object(g.a)(L.applications);try{for(r.s();!(o=r.n()).done;){var i=o.value,c=L.parents.shift(),l=void 0===c?null:c.left.identifier===i.identifier?y.Child.Left:y.Child.Right,d=new(z(t))(i);d.reducer.perform();var p=d.reducer.tree;void 0===c||null===l?(c=null,l=null,a=e=p):(c[l]=p,a=c[l]),s=c}}catch(w){r.e(w)}finally{r.f()}if(function(e){if(["*","+","/","-","^","DELTA","=",">","<",">=","<=","ZERO","NOT","AND","OR","PRED","SUC"].includes(e.name()))return!0;return!1}(u)){if(null===a)throw Error("This is bad, real bad.");if(null===s)for(;;){var b=I(e,t,n),h=Object(v.a)(b,2),m=h[0],j=h[1];if(m instanceof N.None)return D(e,n);e=j(e)}else for(var O=s.left.identifier===a.identifier?y.Child.Left:y.Child.Right;;){var f=I(a,t,n),x=Object(v.a)(f,2),S=x[0],E=x[1];if(S instanceof N.None)return s[O]=D(a,n),e;a=E(a)}}return e}]}}return{v:[O,function(e){var t=f(b);return null!==i&&null!==l&&(i[l]=u),t}]}}();return"object"===typeof l?l.v:void 0}function D(e,t){if(function(e){if(!(e instanceof N.Lambda))return!1;if(!(e.body instanceof N.Lambda))return!1;return P(e.argument.name(),e.body.argument.name(),e.body.body)}(e)){var n=function(e){var t=e.argument.name(),n=e.body.argument.name();return F(e.body.body,t,n)}(e),o=function(e){return[e.argument.name(),e.body.argument.name()]}(e),a=Object(v.a)(o,2),s=a[0],r=a[1];return 0===n&&"s"===s&&"z"===r?Object(N.parse)(Object(N.tokenize)("0",{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t):0===n&&"t"===s&&"f"===r?Object(N.parse)(Object(N.tokenize)("F",{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t):Object(N.parse)(Object(N.tokenize)("".concat(n),{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t)}for(var i=0,c=[].concat(Object(p.a)(Object.entries(N.builtinMacros)),Object(p.a)(Object.entries(t)));i<c.length;i++){var l=Object(v.a)(c[i],2),u=l[0],d=l[1],b=Object(N.tokenize)(d,{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),h=Object(N.parse)(b,t);if(new E([e,h],[t,t]).equals)return Object(N.parse)(Object(N.tokenize)(u,{lambdaLetters:["\u03bb"],singleLetterVars:!1,macromap:t}),t)}return e}function P(e,t,n){return n instanceof N.Variable&&n.name()===t||n instanceof N.Application&&n.left.toString()===e&&P(e,t,n.right)}function F(e,t,n){return e instanceof N.Variable&&e.name()===n?0:1+F(e.right,t,n)}function U(e,t){if(t.type===N.ASTReductionType.ALPHA){var n=t;if(Array.from(n.conversions).some((function(t){return e.identifier===t.identifier})))return!0}else if(t.type===N.ASTReductionType.BETA){var o=t;if(null!==o.treeSide&&null!==o.parent&&e.identifier===o.parent[o.treeSide].identifier)return!0}else if(t.type===N.ASTReductionType.ETA){var a,s=t;if(e.identifier===(null===(a=s.parent)||void 0===a?void 0:a.identifier))return!0}else if(t.type===N.ASTReductionType.EXPANSION){var r=t;if(e.identifier===r.target.identifier)return!0}else if(t.type===N.ASTReductionType.GAMA){var i=t;if(e.identifier===i.applications[i.applications.length-1].identifier)return!0}return(e instanceof N.Application||e instanceof N.Lambda)&&(U(e.left,t)||U(e.right,t))}function _(e){return e instanceof N.Lambda?[e.left.name()].concat(Object(p.a)(_(e.right))):[]}var Y=Object(m.a)((function e(t,n,o){Object(h.a)(this,e),this.applications=t,this.parents=n,this.arity=o,this.type=N.ASTReductionType.GAMA})),V=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e,o,a){var s;return Object(h.a)(this,n),(s=t.call(this)).arity=e,s.basepoint=o,s.parents=[],s.applications=[],s.found=!1,a.visit(Object(j.a)(s)),s}return Object(m.a)(n,[{key:"onApplication",value:function(e){return e.identifier===this.basepoint.identifier?(this.applications.push(e),void(this.found=!0)):(e.left.visit(this),this.found&&e.left.identifier===this.applications[this.applications.length-1].identifier?(this.arity>this.applications.length&&this.applications.push(e),void this.parents.push(e)):void(this.found||(e.right.visit(this),this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e))))}},{key:"onLambda",value:function(e){e.right.visit(this),this.found&&e.right.identifier===this.applications[this.applications.length-1].identifier&&this.parents.push(e)}},{key:"onChurchNumeral",value:function(e){}},{key:"onMacro",value:function(e){}},{key:"onVariable",value:function(e){}}]),n}(N.ASTVisitor);function z(e){switch(e){case c.NORMAL:return N.NormalEvaluator;case c.APPLICATIVE:return N.ApplicativeEvaluator;case c.OPTIMISATION:return N.OptimizeEvaluator;case c.ABSTRACTION:return N.NormalAbstractionEvaluator}}var W=[o.UNTYPED_LAMBDA,o.LISP,o.MARKDOWN],H=[o.UNTYPED_LAMBDA,o.MARKDOWN,o.LISP];var K={boxList:[],activeBoxIndex:NaN,focusedBoxIndex:void 0,allowedBoxes:H,settings:function(e){var t={};-2===e?e=[]:-1===e&&(e=W);var n,a=Object(g.a)(e);try{for(a.s();!(n=a.n()).done;){if(n.value===o.UNTYPED_LAMBDA)t=Object(b.a)(Object(b.a)({},t),{},Object(x.a)({},M,R))}}catch(s){a.e(s)}finally{a.f()}return t}(H),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:"Default Ntbk",editingName:!1,persistent:!0},G={notebookList:[K],currentNotebook:0,currentScreen:a.MAIN};function $(){for(var e=Object(x.a)({},M,{}),t=window.localStorage.getItem("global-settings"),n=null===t?e:JSON.parse(t),o=0,a=Object.entries(n);o<a.length;o++){var s=Object(v.a)(a[o],2),r=s[0],i=s[1];if(r===M)n[r]=Object(b.a)(Object(b.a)({},R),i);else console.error("Settings CODE NAME is not one of known Code Names.")}return n}function q(){return G}function X(e){var t=n(73).stringify;localStorage.setItem("AppState",t(e))}function J(e,t){if(e.persistent){var n=q();n.notebookList[t]=e,X(n)}}function Z(e){var t=e.boxList.map((function(e,t,n){return e.type===o.UNTYPED_LAMBDA?w(e):e}));return Object(b.a)(Object(b.a)({},e),{},{boxList:t})}n(137);var Q=n(3);function ee(e){var t=e.state,o=e.onImport,s=e.onClearWorkspace,r=e.onScreenChange,i=t.currentNotebook,c=t.notebookList,l=t.currentScreen,u=c[i],d=u.name,p=function(e){var t=new Blob([e],{type:"application/json"});return window.URL.createObjectURL(t)}((0,n(73).stringify)(u));return Object(Q.jsxs)("div",{className:"top-bar",children:[Object(Q.jsx)("div",{className:"cursor-pointer top-bar--notebook-name-container",onClick:function(){return r(a.MAIN)},children:Object(Q.jsx)("span",{className:"top-bar--notebook-name",children:d})}),Object(Q.jsxs)("span",{className:"top-bar--item-container",children:[Object(Q.jsxs)("span",{className:l===a.SETTINGS?"top-bar--item top-bar--item-hoverable top-bar--item-hoverable--active":"top-bar--item top-bar--item-hoverable",title:"Go to the Settings",onClick:function(){l===a.SETTINGS?r(a.MAIN):r(a.SETTINGS)},children:[Object(Q.jsx)("i",{className:"top-icon fas fa-cogs"}),Object(Q.jsx)("p",{className:"top-bar--icon-label",children:"Settings"})]}),Object(Q.jsxs)("span",{className:"top-bar--item top-bar--item-hoverable",title:"Clear the Whole Workspace",onClick:s,children:[Object(Q.jsx)("i",{className:"top-icon fas fa-eraser"}),Object(Q.jsx)("p",{className:"top-bar--icon-label",children:"Clear All"})]}),Object(Q.jsx)("a",{className:"export",href:p,download:"notebook_lambdulus.lus",onClick:function(){return setTimeout((function(){}),10)},children:Object(Q.jsxs)("span",{className:"top-bar--item top-bar--item-hoverable",title:"Download this Notebook",children:[Object(Q.jsx)("i",{id:"download",className:"top-icon fas fa-cloud-download-alt"}),Object(Q.jsx)("p",{className:"top-bar--icon-label",children:"Export"})]})}),Object(Q.jsx)("input",{type:"file",accept:".lus",id:"input",onChange:function(e){return function(e,t){var n=e.target.files;if(null===n)return;var o=n[0],a=new FileReader;a.onload=function(e){var n=JSON.parse(a.result);t(Z(n))},a.readAsText(o)}(e,o)}}),Object(Q.jsx)("label",{htmlFor:"input",children:Object(Q.jsxs)("span",{className:"top-bar--item top-bar--item-hoverable",title:"Import a Notebook from Computer",children:[Object(Q.jsx)("i",{className:"top-icon fas fa-cloud-upload-alt"}),Object(Q.jsx)("p",{className:"top-bar--icon-label",children:"Import"})]})})]})]})}n(139);function te(e){var t=e.state,n=e.onScreenChange,o=t.currentScreen;return Object(Q.jsxs)("div",{id:"menu-bar",children:[Object(Q.jsxs)("div",{className:"tab",title:"Get Info about this Tool",onClick:function(){return n(a.MAIN)},children:[Object(Q.jsx)("span",{className:"lambdulusIcon",children:"\u03bb"}),Object(Q.jsx)("p",{className:"iconLabel",children:"Lambdulus"})]}),Object(Q.jsxs)("div",{className:"menu-bar--bottom-part",children:[Object(Q.jsxs)("div",{className:"tab tab-hoverable",title:"Submit a Bug or a Feature Request",children:[Object(Q.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/lambdulus/frontend/issues",children:Object(Q.jsx)("i",{className:"icon fas fa-bug"})}),Object(Q.jsx)("p",{className:"iconLabel",children:"GH Issues"})]}),Object(Q.jsxs)("div",{className:o===a.HELP?"currentTab tab tab-hoverable":"tab tab-hoverable",title:o===a.MAIN?"Show the Manual":"Go back",onClick:function(){o===a.HELP?n(a.MAIN):n(a.HELP)},children:[Object(Q.jsx)("i",{className:"icon far fa-question-circle"}),Object(Q.jsx)("p",{className:"iconLabel",children:"Manual"})]})]})]})}n(140);var ne="Note in MarkDown";function oe(e){return Object(b.a)(Object(b.a)({},e),{},{isEditing:!1})}var ae,se=n(17);!function(e){e.EMPTY="EMPTY",e.ORDINARY="ORDINARY"}(ae||(ae={}));n(153);function re(e,t){return console.log({whitelist:t}),function(e){return-1===e}(t)||t.includes(e)}function ie(e){var t,n,a=e.addNew,s=e.whiteList,i=e.settings,c=i[M];i.TINY_LISP;return Object(Q.jsx)("div",{className:"box-top-bar--modal--pick-box-type",children:(n=s,-2===n?Object(Q.jsx)("h4",{children:"No Boxes Allowed"}):Object(Q.jsx)("div",{className:"modal--create-box",children:Object(Q.jsxs)("div",{className:"modal--create-box--container",children:[(t=re(o.UNTYPED_LAMBDA,s),t?Object(Q.jsx)("div",{className:"add-box--group",onClick:function(e){var t;e.stopPropagation(),a((t=c,Object(b.a)(Object(b.a)({},t),{},{__key:Date.now().toString(),type:o.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(b.a)({},L.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})))},children:Object(Q.jsxs)("div",{className:"plusBtn",title:"Create new \u03bb box",children:[Object(Q.jsx)("p",{className:"create-box--big",children:"\u03bb"}),Object(Q.jsx)("p",{className:"creat-box--label",children:"+ Untyped \u03bb Expression"})]})}):null),function(e){return e?Object(Q.jsx)("div",{className:"add-box--group",onClick:function(e){e.stopPropagation(),a({__key:Date.now().toString(),type:o.LISP,title:"New Tiny Lisp Expression",minimized:!1,menuOpen:!1,settingsOpen:!1,subtype:ae.EMPTY,expression:"",mouseOver:null,interpreter:null,editor:{placeholder:"",content:"",caretPosition:-1,syntaxError:null},current:se.InstructionShortcut.DUMMY})},children:Object(Q.jsxs)("div",{className:"plusBtn",title:"Create new Lisp box",children:[Object(Q.jsx)("p",{className:"create-box--big",children:"()"}),Object(Q.jsx)("p",{className:"creat-box--label",children:"+ Lisp Expression"})]})}):null}(re(o.LISP,s)),function(e){return e?Object(Q.jsx)("div",{className:"add-box--group",onClick:function(e){e.stopPropagation(),a({__key:Date.now().toString(),type:o.MARKDOWN,title:"Markdown Box",minimized:!1,menuOpen:!1,settingsOpen:!1,note:"",isEditing:!0,editor:{placeholder:ne,content:"",caretPosition:0,syntaxError:null}})},children:Object(Q.jsxs)("div",{className:"plusBtn",title:"Create new MarkDown box",children:[Object(Q.jsx)("p",{className:"create-box--big",children:"M\u2193"}),Object(Q.jsx)("p",{className:"creat-box--label",children:"+ Markdown"})]})}):null}(re(o.MARKDOWN,s))]})}))})}var ce=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).state={modalOpen:!1},o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props.addNew,n=this.state.modalOpen;return!1===this.state.modalOpen?Object(Q.jsx)("div",{className:"create-box-plus",onClick:function(){return e.setState({modalOpen:!n})},children:Object(Q.jsx)("div",{className:"create-box-plus--button",children:Object(Q.jsx)("i",{className:"fas fa-plus"})})}):Object(Q.jsx)(ie,{addNew:function(n){t(n),e.setState({modalOpen:!1})},whiteList:this.props.whiteList,settings:this.props.settings})}}]),n}(l.Component),le=(n(78),n(154),function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e,o,a,s,r){var i;return Object(h.a)(this,n),(i=t.call(this)).tree=e,i.onClick=o,i.reduction=a,i.breakpoints=s,i.SDE=r,i.rendered=null,i.argument=null,i.redexesFound=0,i.tree.visit(Object(j.a)(i)),i}return Object(m.a)(n,[{key:"printMultiLambda",value:function(e,t){var n=this;if(e.body instanceof N.Lambda){var o=e.body.argument,a="argument",s="";this.isBreakpoint(e.body.argument)&&(a+=" breakpoint",s="Will break on substitution");var r=!1;this.reduction instanceof N.Alpha&&Array.from(this.reduction.conversions).some((function(t){return t.identifier===e.body.identifier}))&&(this.argument=o,r=!0,a+=" alpha");var i=this.argument;this.argument!==e.body.argument&&null!==this.argument&&this.argument.name()===e.body.argument.name()&&(this.argument=null),this.argument&&this.argument.name()===o.name()&&(a+=" substitutedArg");var c=Object(Q.jsxs)("span",{className:"arguments",children:[t," "," ",Object(Q.jsx)("span",{className:a,title:s,onClick:function(){o.identifier=Symbol(),n.onClick({type:N.ASTReductionType.BETA,context:o,broken:new Set}),C("Breakpoint added to argument","Breakpoint was added","")},children:o.name()})]});this.printMultiLambda(e.body,c),!0===r&&(this.argument=null),this.argument=i}else{e.body.visit(this);var l=this.rendered;this.rendered=t,this.rendered=Object(Q.jsxs)("span",{className:"function",children:["(",Object(Q.jsxs)("span",{className:"lambda",children:["\u03bb "," "]}),t," . ",l,")"]})}}},{key:"isBreakpoint",value:function(e){var t,n=Object(g.a)(this.breakpoints);try{for(n.s();!(t=n.n()).done;){if(t.value.context.identifier===e.identifier)return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"print",value:function(){return this.rendered}},{key:"onApplication",value:function(e){var t="application",n="left",o="right",a=!1,s=null;if(this.reduction instanceof N.Beta&&(s=this.reduction.redex),this.reduction instanceof Y&&this.redexesFound<this.reduction.arity&&this.reduction.applications.some((function(t){return t.identifier===e.identifier}))&&(e.left instanceof N.Macro&&(n+=" extended-redex"),this.redexesFound++,o+=" extended-redex"),this.reduction instanceof N.Gama&&this.reduction.args.includes(e)&&(t+=" redex abstraction argument"),null!==s&&s.identifier===e.identifier&&s===e&&(n+=" redex",o+=" redex",e.left instanceof N.Lambda&&(this.argument=e.left.argument,a=!0)),e.right instanceof N.Application){e.left.visit(this);var r=Object(Q.jsx)("span",{className:n,children:this.rendered});a&&(this.argument=null),e.right.visit(this);var i=Object(Q.jsxs)("span",{className:o,children:["( ",this.rendered," )"]});this.rendered=Object(Q.jsxs)("span",{className:t,children:[r," ",i]})}else{e.left.visit(this);var c=Object(Q.jsx)("span",{className:n,children:this.rendered});a&&(this.argument=null),e.right.visit(this);var l=Object(Q.jsx)("span",{className:o,children:this.rendered});this.rendered=Object(Q.jsxs)("span",{className:t,children:[c," ",l]})}}},{key:"onLambda",value:function(e){var t=this,n="",o=this.argument;if(this.argument!==e.argument&&null!==this.argument&&this.argument.name()===e.argument.name()&&(this.argument=null),e.body instanceof N.Lambda){var a=e.argument,s="argument";this.isBreakpoint(e.argument)&&(s+=" breakpoint",n="Will break on substitution"),this.argument&&this.argument.name()===a.name()&&(s+=" substitutedArg");var r=Object(Q.jsx)("span",{className:s,title:n,onClick:function(){a.identifier=Symbol(),t.onClick({type:N.ASTReductionType.BETA,context:a,broken:new Set}),C("Breakpoint added to argument","Breakpoint was added","")},children:e.argument.name()});this.printMultiLambda(e,r)}else{var i=e.argument;e.body.visit(this);var c=this.rendered,l="argument",u="";this.isBreakpoint(e.argument)&&(l+=" breakpoint",u="Will break on substitution"),this.argument&&this.argument.name()===i.name()&&(l+=" substitutedArg"),this.rendered=Object(Q.jsxs)("span",{className:"function",children:["(",Object(Q.jsxs)("span",{className:"lambda",children:["\u03bb "," "]}),Object(Q.jsxs)("span",{className:"arguments",onClick:function(){i.identifier=Symbol()},children:[Object(Q.jsx)("span",{className:l,title:u,onClick:function(){i.identifier=Symbol(),t.onClick({type:N.ASTReductionType.BETA,context:i,broken:new Set}),C("Breakpoint added","Breakpoint was added","")},children:e.argument.name()})," "]}),". ",c,")"]})}this.argument=o,null!==o&&(this.argument=o)}},{key:"onChurchNumeral",value:function(e){var t=this,n="churchnumeral",o=null,a="";this.reduction instanceof N.Expansion&&(o=this.reduction.target),this.reduction instanceof N.Gama&&this.reduction.args.includes(e)&&(n+=" redex abstraction argument"),null!==o&&o.identifier===e.identifier&&o===e&&(n+=" redex"),this.isBreakpoint(e)&&(n+=" breakpoint",a="Will break on Expansion"),this.rendered=Object(Q.jsx)("span",{className:n,title:a,onClick:function(){e.identifier=Symbol(),t.onClick({type:N.ASTReductionType.EXPANSION,context:e,broken:new Set}),C("Breakpoint added to ChurchNumeral","Breakpoint was added","")},children:e.name()})}},{key:"onMacro",value:function(e){var t=this,n="macro",o=null,a=" redex",s="";if(this.reduction instanceof N.Expansion&&(o=this.reduction.target),this.reduction instanceof N.Gama){if(this.reduction.redexes.includes(e))o=Object(v.a)(this.reduction.redexes,1)[0],n+=" redex abstraction";this.reduction.args.includes(e)&&(n+=" redex abstraction argument")}this.reduction instanceof Y&&e.identifier===this.reduction.applications[0].left.identifier&&(n+=" abstraction"),null!==o&&o.identifier===e.identifier&&o===e&&(n+=a),this.isBreakpoint(e)&&(n+=" breakpoint",s="Will break on Expansion"),this.rendered=Object(Q.jsx)("span",{className:n,title:s,onClick:function(){e.identifier=Symbol(),t.onClick({type:N.ASTReductionType.EXPANSION,context:e,broken:new Set}),C("Breakpoint added to Macro","Breakpoint was added","")},children:e.name()})}},{key:"onVariable",value:function(e){var t="variable";this.argument&&this.argument.name()===e.name()&&(t+=" substitutedArg",this.reduction instanceof N.Alpha&&(t+=" alpha")),this.rendered=Object(Q.jsx)("span",{className:t,children:e.name()})}}]),n}(N.ASTVisitor));function ue(e){var t=e.lastReduction;return null===t?null:t.type===N.ASTReductionType.BETA?Object(Q.jsx)("p",{className:"lastReduction",children:"\u03b2 reduction"}):t.type===N.ASTReductionType.ALPHA?Object(Q.jsx)("p",{className:"lastReduction",children:"\u03b1 conversion"}):t.type===N.ASTReductionType.EXPANSION?Object(Q.jsx)("p",{className:"lastReduction",children:"Macro expansion"}):t.type===N.ASTReductionType.ETA?Object(Q.jsx)("p",{className:"lastReduction",children:"\u03b7 conversion"}):t.type===N.ASTReductionType.GAMA?Object(Q.jsx)("p",{className:"lastReduction",children:"Simplified Beta Reduction"}):null}var de=Object(l.memo)(be,(function(e){return!e.lastStep}));function pe(e){return Object(Q.jsx)(de,Object(b.a)({},e))}function be(e){var t=e.stepRecord,n=e.addBreakpoint,o=e.breakpoints,a=e.children,s=e.strategy,r=e.SDE,c=e.macrotable,l=t.ast,u=t.lastReduction,d=t.step,p=t.message,b=t.exerciseStep,h=p.validity;if(null===l)return null;var m=l.clone(),j=r?I(m,s,c)[0]:new(z(s))(l).nextReduction;j instanceof Y||j instanceof N.None||(j=new(z(s))(l).nextReduction);var O=new le(l,n,j,o,r);return Object(Q.jsxs)("span",{className:"step",children:[Object(Q.jsx)(ue,{lastReduction:u}),Object(Q.jsxs)("div",{className:"inlineblock",children:[Object(Q.jsxs)("p",{className:"stepNumber",children:[d," :"]}),O.print(),a,""===t.message.message?null:!1===b?Object(Q.jsx)("p",{className:"stepMessage",children:t.message.message}):h===i.INCORRECT?Object(Q.jsxs)("span",{children:[Object(Q.jsxs)("p",{className:"stepMessage incorrect",children:["Your input is incorrect!",Object(Q.jsx)("br",{})," It was:",Object(Q.jsxs)("i",{className:"userInput",children:["`",t.message.message.substr(15),"`"]}),Object(Q.jsx)("br",{})]}),Object(Q.jsx)("p",{className:"stepMessage",children:"Continue from the next step please."})]}):Object(Q.jsx)("p",{className:"stepMessage correct",children:t.message.message})]})]})}function he(e){var t=e.className,n=e.SDE,o=e.macrotable;return Object(Q.jsxs)("div",{className:t+" inactiveBox",children:[Object(Q.jsx)("ul",{className:"UL",children:Object(Q.jsx)("li",{className:"activeStep LI",children:Object(Q.jsx)(pe,{breakpoints:e.breakpoints,strategy:e.strategy,addBreakpoint:function(){},stepRecord:e.history[0],lastStep:!1,SDE:n,macrotable:o,children:Object(Q.jsx)("p",{})})},0)}),Object(Q.jsxs)("p",{className:"inactiveMessage",children:["Collapsing ",e.history.length-1," ",2===e.history.length?"step":"steps",". Click to activate this box."]})]})}var me,je=n(88);n(200);function Oe(e){var t=e.placeholder,n=e.content,o=e.syntaxError,a=e.submitOnEnter,s=e.shouldReplaceLambda,r=e.onContent,i=e.onEnter,c=e.onShiftEnter,l=e.onCtrlEnter,u=function(e){s&&(e=e.replace(/\\/g,"\u03bb")),r(e)};return Object(Q.jsxs)("div",{className:"editorContainer",children:[o?Object(Q.jsx)("p",{className:"editorError",children:"".concat(o)}):null,Object(Q.jsx)("div",{className:"editor",children:Object(Q.jsx)(fe,{placeholder:t,content:n,onContent:function(e){return u(e)},onKeyDown:function(e){e.shiftKey||e.ctrlKey||"Enter"!==e.key?(e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),c()),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),l())):a&&(e.stopPropagation(),e.preventDefault(),i())}})})]})}function fe(e){var t=e.content,n=e.onKeyDown,o=e.onContent,a=t.split("\n").length;return Object(Q.jsx)("div",{onKeyDownCapture:n,children:Object(Q.jsx)(je.a,{height:Math.max(95,Math.min(760,19*(a+1))),language:"markdown",theme:"vs-light",value:t,options:{formatOnPaste:!0,minimap:{enabled:!1},renderLineHighlight:"none",scrollBeyondLastLine:!1,overviewRulerBorder:!1,scrollbar:{}},onChange:function(e){return o(e)},editorDidMount:function(e,t){return e.focus()}})})}!function(e){e.ENTER_EXPRESSION="Enter Expression",e.ENTER_EXERCISE="Enter Exercise",e.NEXT_STEP="Next Step",e.RUN="Run",e.ENTER_MD="Enter MarkDown"}(me||(me={}));n(201);var ve=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.onkeydown=function(t){console.log("KEYDOWN",t.key),t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||"F8"!==t.key&&"F9"!==t.key||("F8"===t.key&&(t.preventDefault(),e.props.onStep()),"F9"===t.key&&(t.preventDefault(),e.props.onRun()))}}},{key:"componentWillUnmount",value:function(){document.onkeydown=function(){}}},{key:"render",value:function(){var e=this.props,t=e.isRunning,n=e.onStep,o=e.onRun,a=t?"Stop the Evaluation (Press F9)":"Evaluate the Expression (Press F9)";return Object(Q.jsxs)("div",{className:"debug-controls",children:[Object(Q.jsxs)("button",{title:a,type:"button",className:"btn debug-controls--run",onClick:o,children:[Object(Q.jsx)("span",{className:"debug-controls--btn-label",children:t?"Stop":"Run"}),Object(Q.jsx)("i",{className:"mini-icon fas fa-play"})]}),Object(Q.jsxs)("button",{title:"Evaluate Next Step (Press F8)",type:"button",className:"btn debug-controls--step",onClick:n,disabled:t,children:[Object(Q.jsx)("span",{className:"debug-controls--btn-label",children:"Step"}),Object(Q.jsx)("i",{className:"mini-icon fas fa-step-forward"})]})]})}}]),n}(l.PureComponent),xe=(n(202),function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).addBreakpoint=o.addBreakpoint.bind(Object(j.a)(o)),o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.state,a=t.editor,s=t.shouldShowDebugControls,r=t.isExercise,i=t.setBoxState,l=o.isRunning,u=o.strategy,d=o.SDE,p=o.macrotable,h=a.placeholder,m=a.content,j=a.syntaxError,O=new Uint32Array(2);window.crypto.getRandomValues(O);var f="".concat(Date.now(),"-").concat(Math.random(),"-").concat(O[0],"-").concat(O[1]);return Object(Q.jsxs)("div",{className:n,children:[Object(Q.jsxs)("ul",{className:"UL",children:[k(0,this.props.history.length-2,this.props.history,(function(t,n){return Object(Q.jsx)("li",{className:"inactiveStep LI",children:Object(Q.jsx)(pe,{breakpoints:e.props.breakpoints,strategy:e.props.state.strategy,addBreakpoint:function(){},stepRecord:t,lastStep:!1,SDE:d,macrotable:p,children:Object(Q.jsx)("i",{className:"hiddenIcon far fa-clone",title:"Clone this expression to the new box",onClick:function(n){n.stopPropagation(),e.props.addBox(e.props.createBoxFrom(t))}})})},n.toString())})),Object(Q.jsx)("li",{className:"activeStep LI",children:Object(Q.jsx)(pe,{breakpoints:this.props.breakpoints,strategy:this.props.state.strategy,addBreakpoint:this.addBreakpoint,stepRecord:this.props.history[this.props.history.length-1],lastStep:!0,SDE:d,macrotable:p,children:Object(Q.jsx)("i",{className:"hiddenIcon far fa-clone",title:"Clone this expression to the new box",onClick:function(t){t.stopPropagation(),e.props.addBox(e.props.createBoxFrom(e.props.history[e.props.history.length-1]))}})})},this.props.history.length-1)]}),r&&!this.props.isNormalForm?Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Oe,{placeholder:h,content:m,syntaxError:j,submitOnEnter:!0,onContent:this.props.onContent,onEnter:this.props.onEnter,onShiftEnter:function(){},onCtrlEnter:function(){},onExecute:this.props.onExecute,shouldReplaceLambda:!0}),Object(Q.jsxs)("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock",children:[Object(Q.jsx)("p",{className:"stratsLabel inlineblock",children:"Strategy:"}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--normal-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:u===c.NORMAL,onChange:function(){return i(Object(b.a)(Object(b.a)({},o),{},{strategy:c.NORMAL}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(f),children:"Normal"})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:u===c.APPLICATIVE,onChange:function(){return i(Object(b.a)(Object(b.a)({},o),{},{strategy:c.APPLICATIVE}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(f),children:"Applicative"})]})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SDE-".concat(f),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return i(Object(b.a)(Object(b.a)({},o),{},{SDE:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(f),children:"Simplified Evaluation"})]})]}):!this.props.isNormalForm&&s?Object(Q.jsxs)("div",{style:{height:"2.5em"},children:[Object(Q.jsx)("span",{className:"untyped-lambda--debug-ctrl",children:Object(Q.jsx)(ve,{isRunning:l,onStep:this.props.onEnter,onRun:this.props.onExecute})}),Object(Q.jsxs)("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock",children:[Object(Q.jsx)("p",{className:"stratsLabel inlineblock",children:"Strategy:"}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--normal-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:u===c.NORMAL,onChange:function(){return i(Object(b.a)(Object(b.a)({},o),{},{strategy:c.NORMAL}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(f),children:"Normal"})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(f),type:"radio",name:"untyped-lambda-settings--strategy-".concat(f),checked:u===c.APPLICATIVE,onChange:function(){return i(Object(b.a)(Object(b.a)({},o),{},{strategy:c.APPLICATIVE}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(f),children:"Applicative"})]})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SDE-".concat(f),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return i(Object(b.a)(Object(b.a)({},o),{},{SDE:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(f),children:"Simplified Evaluation"})]})]}):null]})}},{key:"addBreakpoint",value:function(e){var t=this.props,n=t.state,o=t.setBoxState,a=t.breakpoints,s=a.filter((function(t){return t.type!==e.type||t.context.identifier!==e.context.identifier}));s.length!==a.length?o(Object(b.a)(Object(b.a)({},n),{},{breakpoints:s})):o(Object(b.a)(Object(b.a)({},n),{},{breakpoints:[].concat(Object(p.a)(a),[e])}))}}]),n}(l.PureComponent)),ge=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onContent=o.onContent.bind(Object(j.a)(o)),o.onSimplifiedStep=o.onSimplifiedStep.bind(Object(j.a)(o)),o.onStep=o.onStep.bind(Object(j.a)(o)),o.onExecute=o.onExecute.bind(Object(j.a)(o)),o.onRun=o.onRun.bind(Object(j.a)(o)),o.onStop=o.onStop.bind(Object(j.a)(o)),o.shouldBreak=o.shouldBreak.bind(Object(j.a)(o)),o.createBoxFrom=o.createBoxFrom.bind(Object(j.a)(o)),o.onSimplifiedRun=o.onSimplifiedRun.bind(Object(j.a)(o)),o}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,o=e.addBox,a=t.minimized,s=t.history,r=t.breakpoints,i=t.editor,c=t.SDE,l=t.macrotable,u="box boxEval",d=(s.length?s[s.length-1]:{isNormalForm:!1}).isNormalForm;return a?Object(Q.jsx)(he,{className:u,breakpoints:r,history:s,strategy:this.props.state.strategy,SDE:c,macrotable:l,createBoxFrom:this.createBoxFrom}):Object(Q.jsx)(xe,{className:u,isExercise:!1,state:t,breakpoints:r,history:s,editor:i,isNormalForm:d,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onStep,onExecute:this.onExecute,addBox:o})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,a=t.SLI,i=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:o.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:i,SLI:a,expandStandalones:c,macrolistOpen:!1,macrotable:{},editor:{placeholder:s.EVAL_MODE,content:Object.entries(l).map((function(e){var t=Object(v.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(b.a)(Object(b.a)({},n),{},{editor:Object(b.a)(Object(b.a)({},n.editor),{},{content:e,syntaxError:null})}))}},{key:"onSimplifiedStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.history,s=t.macrotable,r=a[a.length-1],c=r.isNormalForm,l=r.step,u=r.ast.clone(),d=u;if(!c){var h=I(u,o,s),m=Object(v.a)(h,2),j=m[0],O=m[1],f={validity:i.CORRECT,userInput:"",message:""},x=!1;if(j instanceof Y){var g=j.arity;j.applications.length!==g?(r.message.message="Macro ".concat(D(j.applications[0].left,s)," is given too few arguments."),d=O(d)):d=O(d)}else if(j instanceof N.None){console.log("first is NONE");var y=new N.OptimizeEvaluator(u);if(y.nextReduction instanceof N.None)return console.log("second is NONE"),r.isNormalForm=!0,r.message.message="Expression is in normal form.",void n(Object(b.a)({},t));console.log("second is ",y.nextReduction),d=y.perform(),j=y.nextReduction}else d=O(d);var S=d.clone(),E=I(S,o,s);Object(v.a)(E,1)[0]instanceof N.None&&new N.OptimizeEvaluator(S).nextReduction instanceof N.None&&(x=!0,f.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",u.toString())),n(Object(b.a)(Object(b.a)({},t),{},{history:[].concat(Object(p.a)(a),[{ast:d,lastReduction:j,step:l+1,message:f,isNormalForm:x,exerciseStep:!1}])})),C("Evaluation Step","Step Normal Form Reached",u.toString())}}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.SDE,s=t.history;if(a)this.onSimplifiedStep();else{var r=s[s.length-1],c=r.isNormalForm,l=r.step,u=r.ast,d=r.lastReduction;if(u=u.clone(),!c){var h=new(z(o))(u);if(d=h.nextReduction,h.nextReduction instanceof N.None){var m=new N.OptimizeEvaluator(u);if(m.nextReduction instanceof N.None)return r.isNormalForm=!0,r.message.message="Expression is in normal form.",n(Object(b.a)({},t)),void C("Evaluation Step","Step Normal Form Reached",u.toString());h=m,d=m.nextReduction}u=h.perform();var j={validity:i.CORRECT,userInput:"",message:""},O=!1,f=u.clone();new(z(o))(f).nextReduction instanceof N.None&&new N.OptimizeEvaluator(f).nextReduction instanceof N.None&&(O=!0,j.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",u.toString())),n(Object(b.a)(Object(b.a)({},t),{},{history:[].concat(Object(p.a)(s),[{ast:u,lastReduction:d,step:l+1,message:j,isNormalForm:O,exerciseStep:!1}])})),C("Evaluation Step","Step",u.toString())}}}},{key:"onExecute",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.isRunning,a=t.SDE;if(o)this.onStop();else{var s=t.timeout,r=t.history,c=r[r.length-1];if(c.isNormalForm)return;var l=c.ast,u=c.step,d=c.lastReduction,p=c.isNormalForm,h={validity:i.CORRECT,userInput:"",message:"Skipping some steps..."};r.push(r[r.length-1]),r[r.length-2]={ast:l.clone(),step:u,lastReduction:d,message:h,isNormalForm:p,exerciseStep:!1},n(a?Object(b.a)(Object(b.a)({},t),{},{isRunning:!0,timeoutID:window.setTimeout(this.onSimplifiedRun,s)}):Object(b.a)(Object(b.a)({},t),{},{isRunning:!0,timeoutID:window.setTimeout(this.onRun,s)})),C("Execution","Run Evaluation",l.toString())}}},{key:"onSimplifiedRun",value:function(){var e=this,t=this.props,n=t.state,o=t.setBoxState,a=n.strategy,s=n.macrotable,r=n.history,c=n.isRunning,l=n.breakpoints,u=n.timeoutID,d=n.timeout,p=r[r.length-1],h=p.isNormalForm,m=p.step,j=p.lastReduction;if(c)if(h)o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:void 0}));else{var O=p.ast,f=O.clone(),x=I(f,a,s),g=Object(v.a)(x,2),y=g[0],S=g[1];if(j=y,y instanceof N.None)return r.pop(),r.push({ast:O,lastReduction:p.lastReduction,step:m,message:{validity:i.CORRECT,userInput:"",message:"Expression is in normal form."},isNormalForm:!0,exerciseStep:!1}),void o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:void 0}));var E=l.find((function(e){return e.type===N.ASTReductionType.GAMA&&!e.broken.has(y.applications[0])}));if(y instanceof Y&&y.arity!==y.applications.length&&void 0===E)return p.message.message="Macro ".concat(D(y.applications[0].left,s)," is given too few arguments."),window.clearTimeout(u),C("Evaluation Run Ended","Breakpoint was reached",O.toString()),l.push({type:N.ASTReductionType.GAMA,context:y.applications[0],broken:new Set([y.applications[0]])}),void o(Object(b.a)(Object(b.a)({},n),{},{breakpoints:l,isRunning:!1,timeoutID:u}));var k=l.find((function(t){return e.shouldBreak(t,y)}));if(void 0!==k)return y instanceof N.Expansion&&k.broken.add(y.target),y instanceof N.Beta&&y.redex.left instanceof N.Lambda&&k.broken.add(y.redex.left.argument),window.clearTimeout(u),C("Evaluation Run Ended","Breakpoint was reached",O.toString()),void o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:u}));O=S(f),r[r.length-1]={ast:O,lastReduction:j,step:m+1,message:{validity:i.CORRECT,userInput:"",message:""},isNormalForm:h,exerciseStep:!1},o(Object(b.a)(Object(b.a)({},n),{},{timeoutID:window.setTimeout(this.onSimplifiedRun,d)}))}}},{key:"onRun",value:function(){var e=this,t=this.props,n=t.state,o=t.setBoxState,a=n.strategy,s=n.history,r=n.isRunning,c=n.breakpoints,l=n.timeoutID,u=n.timeout,d=s[s.length-1],p=d.isNormalForm,h=d.step,m=d.lastReduction;if(r)if(p)o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:void 0}));else{var j=d.ast,O=new(z(a))(j);if(m=O.nextReduction,O.nextReduction instanceof N.None)return s.pop(),s.push({ast:j,lastReduction:d.lastReduction,step:h,message:{validity:i.CORRECT,userInput:"",message:"Expression is in normal form."},isNormalForm:!0,exerciseStep:!1}),void o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:void 0}));var f=c.find((function(t){return e.shouldBreak(t,O.nextReduction)}));if(void 0!==f)return O.nextReduction instanceof N.Expansion&&f.broken.add(O.nextReduction.target),O.nextReduction instanceof N.Beta&&O.nextReduction.redex.left instanceof N.Lambda&&f.broken.add(O.nextReduction.redex.left.argument),window.clearTimeout(l),C("Evaluation Run Ended","Breakpoint was reached",j.toString()),void o(Object(b.a)(Object(b.a)({},n),{},{isRunning:!1,timeoutID:l}));j=O.perform(),s[s.length-1]={ast:j,lastReduction:m,step:h+1,message:{validity:i.CORRECT,userInput:"",message:""},isNormalForm:p,exerciseStep:!1},o(Object(b.a)(Object(b.a)({},n),{},{timeoutID:window.setTimeout(this.onRun,u)}))}}},{key:"onStop",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.timeoutID;window.clearTimeout(o),n(Object(b.a)(Object(b.a)({},t),{},{isRunning:!1,timeoutID:void 0}))}},{key:"shouldBreak",value:function(e,t){return t.type===e.type&&t instanceof N.Beta&&e.context instanceof N.Variable&&t.redex.left instanceof N.Lambda&&t.redex.left.argument.identifier===e.context.identifier&&!e.broken.has(t.redex.left.argument)||(t.type===e.type&&t instanceof N.Expansion&&e.context instanceof N.ChurchNumeral&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target)||t.type===e.type&&t instanceof N.Expansion&&e.context instanceof N.Macro&&t.target.identifier===e.context.identifier&&!e.broken.has(t.target))}}]),n}(l.PureComponent);n(203);function Ne(e){var t=e.macroTable;return Object(Q.jsxs)("div",{className:"macroSpace",children:[Object(Q.jsx)("p",{children:"Built-in Macros:"}),Object(Q.jsx)("ul",{className:"UL",children:Object.entries(N.builtinMacros).map((function(e){var t=Object(v.a)(e,2),n=t[0],o=t[1];return Object(Q.jsx)("span",{children:Object(Q.jsx)("li",{className:"LI dense-LI",children:Object(Q.jsxs)("span",{className:"macro-definition",children:[Object(Q.jsx)("i",{className:"macro-name",children:n})," := ",o]})})},n)}))}),Object(Q.jsx)("p",{children:"User-defined Macros:"}),Object(Q.jsx)("ul",{className:"UL",children:Object.entries(t).map((function(e){var t=Object(v.a)(e,2),n=t[0],o=t[1];return Object(Q.jsx)("span",{children:Object(Q.jsx)("li",{className:"LI dense-LI",children:Object(Q.jsxs)("span",{className:"macro-definition",children:[Object(Q.jsx)("i",{className:"macro-name",children:n})," := ",o]})})},n)}))})]})}var ye=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onContent=o.onContent.bind(Object(j.a)(o)),o.onSubmitExpression=o.onSubmitExpression.bind(Object(j.a)(o)),o.parseExpression=o.parseExpression.bind(Object(j.a)(o)),o.onEnter=o.onEnter.bind(Object(j.a)(o)),o.onExerciseStep=o.onExerciseStep.bind(Object(j.a)(o)),o.onSimplifiedExerciseStep=o.onSimplifiedExerciseStep.bind(Object(j.a)(o)),o.onStep=o.onStep.bind(Object(j.a)(o)),o.onSimplifiedStep=o.onSimplifiedStep.bind(Object(j.a)(o)),o.onExecute=o.onExecute.bind(Object(j.a)(o)),o.onRun=o.onRun.bind(Object(j.a)(o)),o.onStop=o.onStop.bind(Object(j.a)(o)),o.shouldBreak=o.shouldBreak.bind(Object(j.a)(o)),o.createBoxFrom=o.createBoxFrom.bind(Object(j.a)(o)),o}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.state,n=e.isActive,o=e.addBox,a=t.minimized,s=t.history,r=t.breakpoints,i=t.editor,c=t.SDE,l=t.macrotable,u="box boxEval boxExercise",d=(s.length?s[s.length-1]:{isNormalForm:!1}).isNormalForm;return a?Object(Q.jsx)(he,{className:u,breakpoints:r,history:s,strategy:this.props.state.strategy,SDE:c,macrotable:l,createBoxFrom:this.createBoxFrom}):Object(Q.jsx)(xe,{className:u,isExercise:!0,state:t,breakpoints:r,history:s,editor:i,isNormalForm:d,shouldShowDebugControls:n,createBoxFrom:this.createBoxFrom,setBoxState:this.props.setBoxState,onContent:this.onContent,onEnter:this.onEnter,onExecute:this.onExecute,addBox:o})}},{key:"createBoxFrom",value:function(e){var t=this.props.state,n=t.strategy,a=t.SLI,i=t.SDE,c=t.expandStandalones,l=t.macrotable,u=e.ast.toString();return{__key:Date.now().toString(),type:o.UNTYPED_LAMBDA,subtype:r.EMPTY,title:"Copy of ".concat(t.title),minimized:!1,menuOpen:!1,settingsOpen:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:10,strategy:n,SDE:i,SLI:a,expandStandalones:c,macrolistOpen:!1,macrotable:{},editor:{placeholder:s.EVAL_MODE,content:Object.entries(l).map((function(e){var t=Object(v.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+u,caretPosition:u.length,syntaxError:null}}}},{key:"onContent",value:function(e){var t=this.props,n=t.state;(0,t.setBoxState)(Object(b.a)(Object(b.a)({},n),{},{editor:Object(b.a)(Object(b.a)({},n.editor),{},{content:e,syntaxError:null})}))}},{key:"onEnter",value:function(){""===this.props.state.editor.content&&this.onStep(),this.onExerciseStep()}},{key:"onSubmitExpression",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.editor.content,r=t.macrotable;try{var c=this.parseExpression(a,r),l={validity:i.CORRECT,userInput:a,message:""},u=!1,d=c.clone();new(z(o))(d).nextReduction instanceof N.None&&(u=!0,l.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",c.toString())),n(Object(b.a)(Object(b.a)({},t),{},{ast:c,expression:a,history:[{ast:c.clone(),lastReduction:new N.None,step:0,message:l,isNormalForm:u,exerciseStep:!0}],editor:{content:"",caretPosition:0,placeholder:s.EVAL_MODE,syntaxError:null}})),C("Submit Expression","submit valid",a)}catch(j){var p,h,m="Something is wrong with your expression. Please inspect it closely.";console.error(j.toString()),(null===(p=a.match(/:=/g))||void 0===p?void 0:p.length)!==(null===(h=a.match(/;/g))||void 0===h?void 0:h.length)&&(m="Did you forget to write a semicolon after the Macro definition?"),a.match(/\s*;\s*$/g)&&(m="There's a semicolon at the end."),n(Object(b.a)(Object(b.a)({},t),{},{editor:Object(b.a)(Object(b.a)({},t.editor),{},{syntaxError:Error(m)})})),C("Submit Expression","submit invalid",a)}}},{key:"onSimplifiedExerciseStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.history,r=t.editor.content,c=t.macrotable,l=t.SLI;try{var u=r.split(";"),d=u.pop()||"",h=A(u,l),m=Object(b.a)(Object(b.a)({},c),h),j=this.parseExpression(d,m),O=a[a.length-1],f=O.isNormalForm,x=O.step,g=O.ast,y=O.lastReduction;if(g=g.clone(),f)return O.message.message="No more steps available. Expression is in normal form.",n(Object(b.a)({},t)),void C("Exercise Step","Step Already in normal form",r);var S=g.clone(),k=I(S,o,c),L=Object(v.a)(k,2),M=L[0],R=L[1];if(M instanceof N.None){var T=new N.OptimizeEvaluator(S);if(T.nextReduction instanceof N.None)return O.isNormalForm=!0,O.message.message="Expression is already in normal form.",n(Object(b.a)({},t)),void C("Simplified Exercise Step","Step Already in Normal Form",r);g=T.perform(),y=T.nextReduction}else g=R(S);var w=!1,B=g.clone(),D=I(B,o,c);if(Object(v.a)(D,1)[0]instanceof N.None)new N.OptimizeEvaluator(B).nextReduction instanceof N.None&&(w=!0,C("Simplified Evaluation Step","Step Normal Form Reached",g.toString()));var P={validity:i.CORRECT,userInput:r,message:""};new E([j,g],[m,c]).equals?(g=j,P.message="Correct.",C("Exercise Step","Valid Step",r)):(P.message="Incorrect step. ".concat(r),P.validity=i.INCORRECT,C("Exercise Step","Invalid Step",r)),n(Object(b.a)(Object(b.a)({},t),{},{history:[].concat(Object(p.a)(a),[{ast:g,lastReduction:y,step:x+1,message:P,isNormalForm:w,exerciseStep:!0}]),editor:Object(b.a)(Object(b.a)({},t.editor),{},{content:Object.entries(m).map((function(e){var t=Object(v.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+g.toString(),caretPosition:0,placeholder:s.VALIDATE_MODE,syntaxError:null})}))}catch(F){C("Exercise Step","Syntax error in Step",r)}}},{key:"onExerciseStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.history,r=t.editor.content,c=t.SDE,l=t.macrotable,u=t.SLI;if(!0!==c)try{var d=r.split(";"),h=d.pop()||"",m=A(d,u),j=Object(b.a)(Object(b.a)({},l),m),O=this.parseExpression(h,j),f=a[a.length-1],x=f.isNormalForm,g=f.step,y=f.ast,S=f.lastReduction;if(y=y.clone(),x)return f.message.message="No more steps available. Expression is in normal form.",n(Object(b.a)({},t)),void C("Exercise Step","Step Already in normal form",r);var k=new(z(o))(y);if(S=k.nextReduction,k.nextReduction instanceof N.None){var L=new N.OptimizeEvaluator(y);if(L.nextReduction instanceof N.None)return f.isNormalForm=!0,f.message.message="Expression is already in normal form.",n(Object(b.a)({},t)),void C("Exercise Step","Step Already in Normal Form",r);k=L,S=L.nextReduction}y=k.perform();var M=!1,R=y.clone();if(new(z(o))(R).nextReduction instanceof N.None)new N.OptimizeEvaluator(R).nextReduction instanceof N.None&&(M=!0,C("Evaluation Step","Step Normal Form Reached",y.toString()));var T={validity:i.CORRECT,userInput:r,message:""};new E([O,y],[j,l]).equals?(y=O,T.message="Correct.",C("Exercise Step","Valid Step",r)):(T.message="Incorrect step. ".concat(r),T.validity=i.INCORRECT,C("Exercise Step","Invalid Step",r)),n(Object(b.a)(Object(b.a)({},t),{},{history:[].concat(Object(p.a)(a),[{ast:y,lastReduction:S,step:g+1,message:T,isNormalForm:M,exerciseStep:!0}]),editor:Object(b.a)(Object(b.a)({},t.editor),{},{content:Object.entries(j).map((function(e){var t=Object(v.a)(e,2);return t[0]+" := "+t[1]+" ;\n"})).join("")+y.toString(),caretPosition:0,placeholder:s.VALIDATE_MODE,syntaxError:null})}))}catch(w){C("Exercise Step","Syntax error in Step",r)}else this.onSimplifiedExerciseStep()}},{key:"onSimplifiedStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.history,s=t.editor.content,r=t.macrotable,c=a[a.length-1],l=c.isNormalForm,u=c.step,d=c.ast.clone(),h=d;if(!l){var m=I(d,o,r),j=Object(v.a)(m,2),O=j[0],f=j[1],x={validity:i.CORRECT,userInput:s,message:""},g=!1;if(O instanceof Y){var y=O.arity;O.applications.length!==y?(c.message.message="Macro ".concat(D(O.applications[0].left,r)," is given too few arguments."),h=f(h)):h=f(h)}else if(O instanceof N.None){var S=new N.OptimizeEvaluator(d);if(S.nextReduction instanceof N.None)return c.isNormalForm=!0,c.message.message="Expression is in normal form.",void n(Object(b.a)({},t));h=S.perform(),O=S.nextReduction}else h=f(h);var E=h.clone(),k=I(E,o,r);Object(v.a)(k,1)[0]instanceof N.None&&new N.OptimizeEvaluator(E).nextReduction instanceof N.None&&(g=!0,x.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",d.toString())),n(Object(b.a)(Object(b.a)({},t),{},{editor:Object(b.a)(Object(b.a)({},t.editor),{},{content:d.toString()}),history:[].concat(Object(p.a)(a),[{ast:h,lastReduction:O,step:u+1,message:x,isNormalForm:g,exerciseStep:!0}])})),C("Evaluation Step","Step Normal Form Reached",d.toString())}}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.strategy,a=t.history,s=t.SDE,r=a[a.length-1],c=r.isNormalForm,l=r.step,u=r.ast,d=r.lastReduction;if(u=u.clone(),!c)if(s)this.onSimplifiedStep();else{console.log("normal step");var h=new(z(o))(u);if(d=h.nextReduction,h.nextReduction instanceof N.None){var m=new N.OptimizeEvaluator(u);if(m.nextReduction instanceof N.None)return r.isNormalForm=!0,r.message.message="Expression is in normal form.",n(Object(b.a)({},t)),void C("Evaluation Step","Step Normal Form Reached",u.toString());h=m,d=m.nextReduction}u=h.perform();var j={message:"Evaluating One Step for You",validity:i.CORRECT,userInput:""},O=!1,f=u.clone();new(z(o))(f).nextReduction instanceof N.None&&new N.OptimizeEvaluator(u).nextReduction instanceof N.None&&(O=!0,j.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",u.toString())),n(Object(b.a)(Object(b.a)({},t),{},{editor:Object(b.a)(Object(b.a)({},t.editor),{},{content:u.toString()}),history:[].concat(Object(p.a)(a),[{ast:u,lastReduction:d,step:l+1,message:j,isNormalForm:O,exerciseStep:!0}])})),C("Exercise Empty Evaluation Step","Step",u.toString())}}},{key:"onExecute",value:function(){}},{key:"onRun",value:function(){}},{key:"onStop",value:function(){}},{key:"shouldBreak",value:function(e,t){return!1}},{key:"parseExpression",value:function(e,t){console.log("parsing expression ",e),console.log("my macrotable ",t);var n=this.props.state.SLI,o=Object(N.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n,macromap:t});return Object(N.parse)(o,t)}}]),n}(l.PureComponent);n(204);function Se(e){var t=e.settings,n=e.change,o=e.settingsEnabled,a=t.SLI,s=(t.expandStandalones,t.strategy),r=t.SDE,i=o.SLI,l=(o.expandStandalones,o.strategy),u=new Uint32Array(2);window.crypto.getRandomValues(u);var d="".concat(Date.now(),"-").concat(Math.random(),"-").concat(u[0],"-").concat(u[1]);return Object(Q.jsxs)("div",{className:"untyped-lambda-box--settings",children:[i?Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SLI",title:"Single Letters as Names without Spaces",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SLI-".concat(d),type:"checkbox",checked:a,disabled:!1,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{SLI:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(d),children:"Single Letter Names"})]}):null,Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SDE",title:"Simplified Evaluation",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SDE-".concat(d),type:"checkbox",checked:r,disabled:!1,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{SDE:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(d),children:"Simplified Evaluation"})]}),null,l?Object(Q.jsxs)("div",{className:"untyped-lambda-settings-strategies inlineblock",children:[Object(Q.jsx)("p",{className:"stratsLabel inlineblock",children:"Evaluation Strategies:"}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--normal-strategy-".concat(d),type:"radio",name:"untyped-lambda-settings--strategy-".concat(d),checked:s===c.NORMAL,onChange:function(){return n(Object(b.a)(Object(b.a)({},t),{},{strategy:c.NORMAL}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(d),children:"Normal"})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(d),type:"radio",name:"untyped-lambda-settings--strategy-".concat(d),checked:s===c.APPLICATIVE,onChange:function(){return n(Object(b.a)(Object(b.a)({},t),{},{strategy:c.APPLICATIVE}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(d),children:"Applicative"})]})]}):null]})}n(205);function Ee(e){var t=e.className,n=e.isActive,o=e.editor,a=e.isMinimized,s=e.setBoxState,r=e.state,i=o.placeholder,l=o.content,u=o.syntaxError,d=r.SDE,p=r.strategy,h=r.SLI,m=new Uint32Array(2);window.crypto.getRandomValues(m);var j="".concat(Date.now(),"-").concat(Math.random(),"-").concat(m[0],"-").concat(m[1]);return Object(Q.jsxs)("div",{className:"".concat(t," ").concat(n?"":" inactiveBox"),children:[a?Object(Q.jsx)("div",{children:Object(Q.jsx)("p",{className:"inactiveMessage",children:"Collapsing Empty Expression Box. Click to activate this box."})}):Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Oe,{placeholder:i,content:l,syntaxError:u,submitOnEnter:!1,shouldReplaceLambda:!0,onContent:e.onContent,onEnter:function(){},onCtrlEnter:e.onDebug,onShiftEnter:e.onExercise,onExecute:function(){}}),Object(Q.jsxs)("div",{className:"debug-controls",children:[Object(Q.jsx)("button",{title:"Debug this Expression in the Evaluator (Ctrl + Enter)",type:"button",className:"open-as-debug btn",onClick:e.onDebug,children:Object(Q.jsx)("span",{className:"untyped-lambda--submit-expression--btn-label",children:"Debug"})}),Object(Q.jsx)("button",{title:"Exercise this Expression Yourself (Shift + Enter)",type:"button",className:"open-as-exercise btn",onClick:e.onExercise,children:Object(Q.jsx)("span",{className:"untyped-lambda--submit-expression--btn-label",children:"Exercise"})})]})]}),Object(Q.jsxs)("div",{className:"untyped-lambda--pick-strategy untyped-lambda-settings-strategies inlineblock",style:{height:"2.5em"},children:[Object(Q.jsx)("p",{className:"stratsLabel inlineblock",children:"Strategy:"}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--normal-strategy-".concat(j),type:"radio",name:"untyped-lambda-settings--strategy-".concat(j),checked:p===c.NORMAL,onChange:function(){return s(Object(b.a)(Object(b.a)({},r),{},{strategy:c.NORMAL}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--normal-strategy-".concat(j),children:"Normal"})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings--strategy-radio-wrapper",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--applicative-strategy-".concat(j),type:"radio",name:"untyped-lambda-settings--strategy-".concat(j),checked:p===c.APPLICATIVE,onChange:function(){return s(Object(b.a)(Object(b.a)({},r),{},{strategy:c.APPLICATIVE}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--applicative-strategy-".concat(j),children:"Applicative"})]})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SDE-",title:"Simplified Evaluation",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SDE-".concat(j),type:"checkbox",checked:d,disabled:!1,onChange:function(e){return s(Object(b.a)(Object(b.a)({},r),{},{SDE:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SDE-".concat(j),children:"Simplified Evaluation"})]}),Object(Q.jsxs)("span",{className:"untyped-lambda-settings-SLI-",title:"Single Letters as Names without Spaces",children:[Object(Q.jsx)("input",{id:"untyped-lambda-settings--SLI-".concat(j),type:"checkbox",checked:h,disabled:!1,onChange:function(e){return s(Object(b.a)(Object(b.a)({},r),{},{SLI:e.target.checked}))}}),Object(Q.jsx)("label",{className:"untyped-lambda-settings-label",htmlFor:"untyped-lambda-settings--SLI-".concat(j),children:"Single Letter Names"})]})]})}var ke=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,a=t.isActive,s=t.isFocused,i=t.setBoxState,c=t.addBox,l=n.settingsOpen,u=n.subtype,d=n.macrolistOpen,p=n.SLI,h=n.expandStandalones,m=n.strategy,j=n.SDE,O=n.editor,f=n.minimized;return Object(Q.jsxs)("div",{ref:function(e){if(null!==e&&a){var t=e.getBoundingClientRect(),n=window.innerHeight;t.bottom>n&&e.scrollIntoView(!1)}},children:[l?Object(Q.jsxs)("div",{className:"box-settings",children:["Box Local Settings:",Object(Q.jsx)(Se,{settings:{type:o.UNTYPED_LAMBDA,SLI:p,expandStandalones:h,strategy:m,SDE:j},settingsEnabled:B,change:function(e){i(Object(b.a)(Object(b.a)({},n),e))}})]}):null,d?Object(Q.jsx)("div",{className:"untyped-lambda-box--macrolist",children:Object(Q.jsx)(Ne,{macroTable:n.macrotable})}):null,Object(Q.jsx)("div",{children:function(){switch(u){case r.EMPTY:return Object(Q.jsx)(Ee,{className:"box boxEval",isActive:a,isMinimized:f,editor:O,state:n,onContent:function(e){return i(Object(b.a)(Object(b.a)({},n),{},{editor:Object(b.a)(Object(b.a)({},n.editor),{},{content:e,syntaxError:null})}))},onDebug:function(){return e.onSubmitExpression(r.ORDINARY)},onExercise:function(){return e.onSubmitExpression(r.EXERCISE)},setBoxState:i});case r.ORDINARY:return Object(Q.jsx)(ge,{state:n,isActive:a,isFocused:s,macroContext:L,setBoxState:i,addBox:c});case r.EXERCISE:return Object(Q.jsx)(ye,{state:n,isActive:a,isFocused:s,macroContext:L,setBoxState:i,addBox:c})}}()})]})}},{key:"onSubmitExpression",value:function(e){var t=this.props,n=t.state,o=t.setBoxState,a=n.editor.content,r=n.strategy,c=n.SDE,l=n.SLI;try{var u=a.split(";"),d=u.pop()||"",p=A(u,l),h=this.parseExpression(d,p),m={validity:i.CORRECT,userInput:"",message:""},j=!1,O=h.clone();if((c?I(O,r,p)[0]:new(z(r))(O).nextReduction)instanceof N.None)new N.OptimizeEvaluator(h).nextReduction instanceof N.None&&(j=!0,m.message="Expression is in normal form.",C("Evaluation Step","Step Normal Form Reached",h.toString()));o(Object(b.a)(Object(b.a)({},n),{},{ast:h,subtype:e,expression:a,macrotable:p,history:[{ast:h.clone(),lastReduction:new N.None,step:0,message:m,isNormalForm:j,exerciseStep:!1}],editor:{content:a,caretPosition:0,placeholder:s.EVAL_MODE,syntaxError:null}})),C("Submit Expression","submit valid",a)}catch(g){var f,v,x="Something is wrong with your expression. Please inspect it closely.";console.error(g.toString()),(null===(f=a.match(/:=/g))||void 0===f?void 0:f.length)!==(null===(v=a.match(/;/g))||void 0===v?void 0:v.length)&&(x="Did you forget to write a semicolon after the Macro definition?"),a.match(/\s*;\s*$/g)&&(x="There's a semicolon at the end."),o(Object(b.a)(Object(b.a)({},n),{},{editor:Object(b.a)(Object(b.a)({},n.editor),{},{syntaxError:new Error(x)})})),C("Submit Expression","submit invalid",a)}}},{key:"parseExpression",value:function(e,t){var n=this.props.state.SLI,o=Object(N.tokenize)(e,{lambdaLetters:["\u03bb"],singleLetterVars:n,macromap:t});return Object(N.parse)(o,t)}}]),n}(l.PureComponent),Ce=(n(83),n(206),n(219));function Le(e){var t=e.state,n=t.note,o=t.editor,a=o.placeholder,s=o.content,r=o.syntaxError,i=t.isEditing,c=e.isActive,l=e.setBoxState;return i?Object(Q.jsx)("div",{className:"box boxNoteEditor",children:Object(Q.jsx)(Oe,{placeholder:a,content:s,syntaxError:r,submitOnEnter:!1,shouldReplaceLambda:!1,onContent:function(t){l(Object(b.a)(Object(b.a)({},e.state),{},{note:t,editor:Object(b.a)(Object(b.a)({},e.state.editor),{},{content:t,syntaxError:null})}))},onEnter:function(){},onCtrlEnter:function(){},onShiftEnter:function(){},onExecute:function(){}})}):Object(Q.jsx)("div",{className:"box boxNote",onClick:function(){return c&&l(Object(b.a)(Object(b.a)({},e.state),{},{isEditing:!0}))},children:Object(Q.jsx)(Ce.a,{className:"markdown-body",children:n})})}function Me(e){return Object(Q.jsx)("div",{children:"Empty Box"})}n(84);var Re=function(){function e(t,n,o,a){Object(h.a)(this,e),this.hasMouseOver=n,this.parentHasMouseOver=o,this.current=a,this.rendered=null,this.enclosingArrayColoured=!1,this.placeholders=[],console.log(t),this.visit(t),this.placeholders=[]}return Object(m.a)(e,[{key:"print",value:function(){return this.rendered}},{key:"visit",value:function(e){this.rendered=this.getElements(e)}},{key:"getElements",value:function(e){var t=this;if(e instanceof se.SECDArray){if(e.empty())return console.log("getElements: Empty arr",e),Object(Q.jsx)("span",{className:this.getClassName(e),children:" [] "});if(e.printed!==se.PrintedState.NO){if("undefined"!=typeof e.getNode()){console.log("(Func) Placeholder for: ",e,e.node,e.printed);var n=se.GeneralUtils.getFunctionName(e.node);if(""!==n){this.placeholders.push(n),e.printInc();var o=this.enclosingArrayColoured?se.ColourType.None:e.colour,a=this.parentHasMouseOver(e.node,o!==se.ColourType.None)&&!this.enclosingArrayColoured?this.highlight(o):this.underline(o);return Object(Q.jsxs)("span",{className:a,children:["[",n,"]"]})}}console.log("Invalid placeholder",e,e.node,e.printed)}console.log("CHECKPOINT 1",e,e.printed),e.printInc(),console.log("CHECKPOINT 2",e,e.printed);var s;console.log("array",e.arr),e.colour!==se.ColourType.None&&(this.enclosingArrayColoured=!0),s=e.arr.map((function(e){return t.getElements(e)})),e.colour!==se.ColourType.None&&(this.enclosingArrayColoured=!1);var r=this.getClassName(e);if(console.log("ABCDEFGH",s,e.node,e.arr,e.printed),e.printed===se.PrintedState.More&&e.node){var i=se.GeneralUtils.getFunctionName(e.node);if(""!==i)return console.log("Naming function",e,i,r),Object(Q.jsxs)("span",{className:r,children:[i,": [",s,"]"]})}return Object(Q.jsxs)("span",{className:r,children:["[",s,"]"]})}if(e instanceof se.SECDValue){var c=this.getClassName(e);return console.log("element: ",c,e.val,this.enclosingArrayColoured),e.val instanceof se.Instruction?Object(Q.jsxs)("span",{className:c,children:[" ",e.val.toString()," "]}):Object(Q.jsxs)("span",{className:c,children:[" ",e.val," "]})}if(e instanceof se.SECDInvalid)return Object(Q.jsx)("span",{});throw Error()}},{key:"getClassName",value:function(e){if(this.enclosingArrayColoured)return this.underline(e.colour);var t=e.node;if("undefined"!=typeof t){var n=e.colour!==se.ColourType.None;if(console.log(e,"Noda je defined.",t,n),t instanceof se.BinaryExprNode){if(console.log("OPERATOR V GETCLASSNAME"),this.parentHasMouseOver(t.operator,n))return this.highlight(e.colour)}else t instanceof se.FuncNode&&e.colour===se.ColourType.Current&&(t=t.func)instanceof se.EndNode&&(t=t.reduced);if(this.parentHasMouseOver(t,n))return console.log("Noda ma na sobe mys.",t,e.colour),this.highlight(e.colour)}return console.log(e,"No highlight"),this.underline(e.colour)}},{key:"underline",value:function(e){switch(e){case se.ColourType.Current:return"underlineCurrent";case se.ColourType.Coloured:return"underlineFirstArgument";case se.ColourType.SecondColoured:return"underlineSecondArgument";case se.ColourType.ThirdColoured:return"underlineThirdArgument";case se.ColourType.None:case se.ColourType.Return:default:return"normalInstruction"}}},{key:"highlight",value:function(e){switch(e){case se.ColourType.Current:return"highlightCurrent";case se.ColourType.Coloured:return"highlightFirstArgument";case se.ColourType.SecondColoured:return"highlightSecondArgument";case se.ColourType.ThirdColoured:return"highlightThirdArgument";case se.ColourType.None:case se.ColourType.Return:default:return"highlightOther"}}}]),e}(),Ae=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e,o,a){var s;return Object(h.a)(this,n),(s=t.call(this)).node=e,s.mouseOver=o,s.mouseLeft=a,s.rendered=null,s.parentColoured=!1,s.lowestEndNode=!1,s.lookAtPredecessors=!0,s.tabs=[],s.handleMouseOver=function(e,t){console.log("MOUSE OVER: ",t),e.preventDefault(),s.mouseOver(t)},s.handleMouseLeft=function(e){e.preventDefault(),s.mouseLeft()},e.accept(Object(j.a)(s)),s}return Object(m.a)(n,[{key:"print",value:function(){return this.rendered}},{key:"addTab",value:function(){this.tabs.push(Object(Q.jsx)("span",{children:" \xa0\xa0\xa0\xa0 "}))}},{key:"removeTab",value:function(){this.tabs.pop()}},{key:"onBinaryExprNode",value:function(e){var t=this,n=se.Instruction.toString(e.operator.operator);if(this.parentColoured){e.left.accept(this);var o=this.rendered;e.right.accept(this);var a=this.rendered;console.log("BIN 0"),this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(",n," ",o," ",a,")"]})}else{e.colour===se.ColourType.Current&&(this.parentColoured=!0),e.left.accept(this);var s=this.rendered;e.right.accept(this);var r=this.rendered;e.colour===se.ColourType.Current?(console.log("BIN 1"),this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:"("}),Object(Q.jsx)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:n})," ",Object(Q.jsx)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.left)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:s})," ",Object(Q.jsx)("span",{className:"underlineSecondArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.right)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:r}),Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]}),this.parentColoured=!1):(console.log("BIN 2"),this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:"("}),Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:n})," ",Object(Q.jsx)("span",{className:"#",children:s})," ",Object(Q.jsx)("span",{className:"#",children:r}),Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]})),e.colour===se.ColourType.Current&&(this.parentColoured=!1)}}},{key:"onCompositeNode",value:function(e){var t=this,n=[];e.items.forEach((function(e){e.accept(t),t.rendered&&(n.push(t.rendered),n.push(Object(Q.jsx)("span",{children:" "})))})),n.slice(0,-1),this.rendered=Object(Q.jsx)("span",{children:n})}},{key:"onEndNode",value:function(e){e.next.accept(this);var t=this.rendered;this.rendered=Object(Q.jsx)("span",{className:"#",children:t})}},{key:"onFuncNode",value:function(e){var t=this;if(this.parentColoured){e.func.accept(this);var n=this.rendered;e.args.accept(this);var o=this.rendered;this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(",n," ",o,")"]})}else{e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!0),e.func.accept(this);var a=this.rendered;e.args.accept(this);var s=this.rendered;e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!1),e.colour===se.ColourType.Current?this.rendered=Object(Q.jsxs)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(",a," ",s,")"]}):e.colour===se.ColourType.Coloured?this.rendered=Object(Q.jsxs)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(",a," ",s,")"]}):this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:"("}),a," ",s,Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]})}this.removeTab(),this.removeTab()}},{key:"onIfNode",value:function(e){var t=this;this.addTab();var n=this.tabs.map((function(e){return Object.assign({},e)}));if(this.parentColoured){e.condition.accept(this);var o=this.rendered;e.left.accept(this);var a=this.rendered;e.right.accept(this);var s=this.rendered;this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(if ",o,Object(Q.jsx)("br",{}),n,a,Object(Q.jsx)("br",{}),n,s,")"]})}else{e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!0),e.condition.accept(this);var r=this.rendered;e.left.accept(this);var i=this.rendered;e.right.accept(this);var c=this.rendered;e.colour===se.ColourType.Current?this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:"(if "}),Object(Q.jsx)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.condition)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:r}),Object(Q.jsx)("br",{}),n,Object(Q.jsx)("span",{className:"underlineSecondArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.left)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:i}),Object(Q.jsx)("br",{}),n,Object(Q.jsx)("span",{className:"underlineThirdArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.right)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:c}),")"]}):e.colour===se.ColourType.Coloured?(console.log("IF 2"),this.rendered=Object(Q.jsx)("span",{className:"#",children:Object(Q.jsxs)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(if ",r,Object(Q.jsx)("br",{}),n,i,Object(Q.jsx)("br",{}),n,c,")"]})})):this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("span",{onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:"(if "}),r,Object(Q.jsx)("br",{}),n,i,Object(Q.jsx)("br",{}),n,c,Object(Q.jsx)("span",{onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]}),e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!1)}this.removeTab()}},{key:"onLambdaNode",value:function(e){var t=this;console.log("Lambda Node: ",e),this.addTab();var n=this.tabs.map((function(e){return Object.assign({},e)}));this.addTab();var o=this.tabs.map((function(e){return Object.assign({},e)}));if(this.parentColoured){e.vars.accept(this);var a=this.rendered;e.body.accept(this);var s=this.rendered;this.rendered=Object(Q.jsxs)("span",{children:[Object(Q.jsx)("br",{}),n,"(lambda (",a,")",Object(Q.jsx)("br",{}),o,s,")"]})}else{this.parentColoured=!0,e.vars.accept(this);var r=this.rendered;this.parentColoured=!1,e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!0),e.body.accept(this);var i=this.rendered;e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!1),e.colour===se.ColourType.Current?this.rendered=Object(Q.jsxs)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:[Object(Q.jsx)("br",{}),n,"(lambda (",r,")",Object(Q.jsx)("br",{}),o,i,")"]}):e.colour===se.ColourType.Coloured?this.rendered=Object(Q.jsxs)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:[Object(Q.jsx)("br",{}),n,"(lambda (",r,")",Object(Q.jsx)("br",{}),o,i,")"]}):this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsx)("br",{}),n,Object(Q.jsxs)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(lambda (",r,")"]}),Object(Q.jsx)("br",{}),o,i,Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]})}this.removeTab(),this.removeTab()}},{key:"onTopNode",value:function(e){var t=this,n=[];e.functions.forEach((function(e){e.accept(t),t.rendered&&(n.push(t.rendered),n.push(Object(Q.jsx)("br",{})))})),e.node.accept(this),this.rendered=Object(Q.jsxs)("span",{children:[n,this.rendered]})}},{key:"onMainNode",value:function(e){e.node.accept(this)}},{key:"onDefineNode",value:function(e){var t=this;e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!0),e.vars.accept(this);var n=this.rendered;e.body.accept(this);var o=this.rendered;e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!1);var a=e.name;e.colour===se.ColourType.Current?this.rendered=Object(Q.jsxs)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(define ",e.name,"(",n,")",Object(Q.jsxs)("ul",{id:"horizontal-list",children:[o,")"]})]}):e.colour===se.ColourType.Coloured?this.rendered=Object(Q.jsxs)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(define ",e.name,"(",n,")",Object(Q.jsxs)("ul",{id:"horizontal-list",children:[o,")"]})]}):this.rendered=Object(Q.jsx)("div",{children:Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsxs)("span",{onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(define ",a]}),"(",n,")",Object(Q.jsxs)("ul",{id:"horizontal-list",children:[o,")"]})]})})}},{key:"onLetNode",value:function(e){var t=this;if(console.log("JSEM V LETU"),this.parentColoured){e.names.accept(this);var n=this.rendered;e.second.accept(this);var o=this.rendered;e.body.accept(this);var a=this.rendered;this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(let(",n,")","(",o,")",Object(Q.jsx)("br",{}),a,")"]})}else{e.colour===se.ColourType.Current&&(this.parentColoured=!0),e.names.accept(this);var s=this.rendered;e.second.accept(this);var r=this.rendered;e.body.accept(this);var i=this.rendered;e.colour===se.ColourType.Current?this.rendered=Object(Q.jsxs)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:[Object(Q.jsxs)("span",{className:"#",children:["(let(",s,")"]}),"(",r,"))",Object(Q.jsx)("br",{}),i,Object(Q.jsx)("span",{className:"#",children:")"})]}):this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsxs)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(let(",s,")"]}),"(",r,"))",Object(Q.jsx)("br",{}),i,Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]}),e.colour===se.ColourType.Current&&(this.parentColoured=!1)}}},{key:"onCallNode",value:function(e){var t=this;if(console.log("JSEM V CALLU"),this.parentColoured){e.body.accept(this);var n=this.rendered;this.rendered=Object(Q.jsx)("span",{className:"#",children:n})}else{e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!0),e.body.accept(this);var o=this.rendered;e.colour===se.ColourType.Current&&(this.rendered=Object(Q.jsx)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:o})),e.colour===se.ColourType.Coloured?this.rendered=Object(Q.jsx)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:o}):this.rendered=Object(Q.jsx)("span",{className:"#",children:o}),e.colour!==se.ColourType.Current&&e.colour!==se.ColourType.Coloured||(this.parentColoured=!1)}}},{key:"onUnaryExprNode",value:function(e){var t=this,n=se.Instruction.toString(e.operator.operator);if(this.parentColoured){e.expr.accept(this);var o=this.rendered;this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(",n," ",o,")"]})}else{e.colour===se.ColourType.Current&&(this.parentColoured=!0),e.expr.accept(this);var a=this.rendered;e.colour===se.ColourType.Current?(this.parentColoured=!0,this.rendered=Object(Q.jsxs)("span",{className:"#",children:["(",Object(Q.jsx)("span",{className:"underlineCurrent",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:n})," ",Object(Q.jsx)("span",{className:"underlineFirstArgument",onMouseOver:function(n){return t.handleMouseOver(n,e.expr)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:a}),")"]}),this.parentColoured=!1):this.rendered=Object(Q.jsxs)("span",{className:"#",children:[Object(Q.jsxs)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:["(",n]})," ",a,Object(Q.jsx)("span",{className:"#",onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:")"})]}),e.colour===se.ColourType.Current&&(this.parentColoured=!1)}}},{key:"onValueNode",value:function(e){var t=this;this.parentColoured?this.rendered=Object(Q.jsx)("span",{className:n.getClassName(e),children:e.value}):this.rendered=Object(Q.jsx)("span",{className:n.getClassName(e),onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:e.value})}},{key:"onVarNode",value:function(e){var t=this;this.parentColoured?this.rendered=Object(Q.jsx)("span",{className:n.getClassName(e),children:e.variable}):this.rendered=Object(Q.jsx)("span",{className:n.getClassName(e),onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:e.variable})}},{key:"onOperatorNode",value:function(e){var t=this;this.rendered=Object(Q.jsx)("span",{className:n.getClassName(e),onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:se.Instruction.toString(e.operator)})}},{key:"onListNode",value:function(e){var t=this;e.items.accept(this),this.parentColoured=!0;var o=this.rendered;this.parentColoured=!1;var a="'";e.parent instanceof se.InnerNode&&e.parent.parent instanceof se.ListNode&&(a=""),this.rendered?this.rendered=Object(Q.jsxs)("span",{className:n.getClassName(e),onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:[a,"(",o,")"]}):this.rendered=Object(Q.jsxs)("span",{className:n.getClassName(e),children:[a,"(",o,")"]})}},{key:"onStringNode",value:function(e){var t=this;this.parentColoured?this.rendered=Object(Q.jsxs)("span",{className:n.getClassName(e),onMouseOver:function(n){return t.handleMouseOver(n,e)},onMouseLeave:function(e){return t.handleMouseLeft(e)},children:['"',e.str,'"']}):this.rendered=Object(Q.jsxs)("span",{className:n.getClassName(e),children:['"',e.str,'"']})}}],[{key:"getClassName",value:function(e){switch(console.log(e.colour),e.colour){case se.ColourType.Current:return"underlineCurrent";case se.ColourType.Coloured:return"underlineFirstArgument";case se.ColourType.SecondColoured:return"underlineSecondArgument";case se.ColourType.ThirdColoured:return"underlineThirdArgument";case se.ColourType.None:case se.ColourType.Return:default:return"normalInstruction"}}}]),n}(se.LispASTVisitor),Te=n(9),we=n(8),Be=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e,o,a,s){var r;return Object(h.a)(this,n),(r=t.call(this,e,o,a,s)).hasMouseOver=o,r.parentHasMouseOver=a,r}return Object(m.a)(n,[{key:"getClassName",value:function(e){return e.colour!==se.ColourType.None&&this.hasMouseOver()?this.highlight(e.colour):Object(Te.a)(Object(we.a)(n.prototype),"getClassName",this).call(this,e)}}]),n}(Re),Ie=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onStep=o.onStep.bind(Object(j.a)(o)),o.onContent=o.onContent.bind(Object(j.a)(o)),o.onDebug=o.onDebug.bind(Object(j.a)(o)),o.onMouseOver=o.onMouseOver.bind(Object(j.a)(o)),o.onMouseLeft=o.onMouseLeft.bind(Object(j.a)(o)),o.hasMouseOver=o.hasMouseOver.bind(Object(j.a)(o)),o.parentHasMouseOver=o.parentHasMouseOver.bind(Object(j.a)(o)),o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props.state,n=t.interpreter,o=t.subtype;console.log("ZACINA RENDER");return function(){switch(o){case ae.EMPTY:return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Oe,{placeholder:"",content:e.props.state.editor.content,syntaxError:null,submitOnEnter:!1,shouldReplaceLambda:!1,onContent:e.onContent,onEnter:function(){},onCtrlEnter:e.onDebug,onShiftEnter:function(){},onExecute:function(){}}),Object(Q.jsx)("button",{title:"Submit this Expression in the Evaluator (Ctrl + Enter)",type:"button",className:"open-as-debug btn",onClick:e.onDebug,children:Object(Q.jsx)("span",{className:"tiny-lisp--submit-expression--btn-label",children:"Submit"})})]});case ae.ORDINARY:if(null==n)throw Error;var a=new Ae(n.topNode,e.onMouseOver,e.onMouseLeft).print();console.log("ZACINA CODE: ",e.hasMouseOver);var s=new Re(n.code,e.hasMouseOver,e.parentHasMouseOver,t.current).print();console.log("ZACINA STACK");var r=new Re(n.stack,e.hasMouseOver,e.parentHasMouseOver,t.current).print();console.log("ZACINA ENVIRONMENT: ",e.hasMouseOver);var i=new Re(n.environment,e.hasMouseOver,e.parentHasMouseOver,t.current).print();console.log("ZACINA DUMP: ",e.hasMouseOver);var c=new Be(n.dump,e.hasMouseOver,e.parentHasMouseOver,t.current).print();return console.log("*****$$$$$",n.code),n.code.clearPrinted(),console.log("*****$$$$$",n.code),n.stack.clearPrinted(),n.environment.clearPrinted(),n.dump.clearPrinted(),console.log("DEBUG--------------------------!!!!!!!!!!!!!!!!!!!!!!!!------------------------"),Object(Q.jsxs)("div",{children:["LISP:",Object(Q.jsx)("br",{}),a,Object(Q.jsxs)("span",{className:"toRight",children:["stack: ",r]}),Object(Q.jsx)("br",{}),"code: ",s,Object(Q.jsx)("br",{}),"environment: ",i,Object(Q.jsx)("br",{}),"dump: ",c,Object(Q.jsx)("br",{}),Object(Q.jsx)("button",{title:"Debug this Expression in the Evaluator (Ctrl + Enter)",type:"button",className:"open-as-debug btn",onClick:e.onStep,children:Object(Q.jsx)("span",{className:"tiny-lisp--debug-expression--btn-label",children:"Step"})})]})}}()}},{key:"onDebug",value:function(){try{var e=new se.Parser,t=e.parse(this.props.state.editor.content),n=new se.Interpreter(t,e.topNode);this.props.setBoxState(Object(b.a)(Object(b.a)({},this.props.state),{},{subtype:ae.ORDINARY,interpreter:n}))}catch(o){this.props.setBoxState(Object(b.a)(Object(b.a)({},this.props.state),{},{editor:Object(b.a)(Object(b.a)({},this.props.state.editor),{},{syntaxError:Error("Error when parsing")})}))}}},{key:"onContent",value:function(e){this.props.setBoxState(Object(b.a)(Object(b.a)({},this.props.state),{},{editor:Object(b.a)(Object(b.a)({},this.props.state.editor),{},{content:e})}))}},{key:"onStep",value:function(){var e=this.props,t=e.state,n=e.setBoxState,o=t.interpreter;if(null==o)throw Error;console.log("Interpreter On Step",o),console.log("$$$$",o.lastInstruction),o.detectAction(),console.log("$$$$",o.lastInstruction);var a=o.lastInstruction.val.shortcut;o.code.clearPrinted(),o.stack.clearPrinted(),o.dump.clearPrinted(),o.environment.clearPrinted(),console.log("Interpreter After Step",o),n(Object(b.a)(Object(b.a)({},t),{},{interpreter:o,current:a}))}},{key:"onMouseOver",value:function(e){console.log("Interpreter1: ",this,e);for(var t=e,n=0,o=e.colour;t.hasParent();){var a=t._parent;if(console.log("TMP NODE",t,a),a instanceof se.TopNode||a instanceof se.MainNode)break;if((a=t._parent).colour!==se.ColourType.None)break;if(a instanceof se.EndNode&&a.reduced.isLeaf()&&(e=a),t=a,n++>10)break}e.colour=o,this.props.setBoxState(Object(b.a)(Object(b.a)({},this.props.state),{},{mouseOver:e})),console.log("Props a node: ",this.props,e)}},{key:"onMouseLeft",value:function(){this.props.setBoxState(Object(b.a)(Object(b.a)({},this.props.state),{},{mouseOver:null}))}},{key:"hasMouseOver",value:function(){return null!=this.props.state.mouseOver}},{key:"parentHasMouseOver",value:function(e,t){if(console.log("IN parentHasMouseOver method",e,this.props.state.mouseOver,t),"undefined"==typeof this.props.state.mouseOver||!this.props.state.mouseOver)return!1;if(!t&&this.props.state.mouseOver.colour!==se.ColourType.None)return!1;if(this.props.state.mouseOver instanceof se.DefineNode&&e instanceof se.VarNode&&this.props.state.mouseOver.name===e.variable)return console.log("RETURNING TRUE",e.variable),!0;if(e===this.props.state.mouseOver)return console.log("RETURNING TRUE"),!0;var n=e._parent;return n instanceof se.InnerNode?this.parentHasMouseOver(n,t):(console.log("RETURNING FALSE"),!1)}}]),n}(l.PureComponent);function De(e){var t=e.state,n=e.isActive,a=e.isFocused,s=e.updateBoxState,r=e.addBoxAfter,i=t.type;return i===o.UNTYPED_LAMBDA?Object(Q.jsx)(ke,{state:t,isActive:n,isFocused:a,setBoxState:s,addBox:r}):i===o.MARKDOWN?Object(Q.jsx)(Le,{state:t,isActive:n,isFocused:a,setBoxState:s}):i===o.LISP?Object(Q.jsx)(Ie,{state:t,isActive:n,isFocused:a,setBoxState:s}):Object(Q.jsx)(Me,{})}n(209);function Pe(e){var t=e.state,n=e.updateBoxState,o=t.macrolistOpen;return Object(Q.jsx)("div",{className:"",children:Object(Q.jsx)("div",{onClick:function(e){e.stopPropagation(),n(Object(b.a)(Object(b.a)({},t),{},{macrolistOpen:!o}))},className:"untyped-lambda--top-bar-custom--button ".concat(o?"menu-pressed-open":""),title:o?"Hide Macros":"Show All Macros for This Box",children:Object(Q.jsx)("i",{className:"mini-icon fas fa-list-ul"})})})}n(210),n(211);function Fe(e){var t=e.state,n=e.updateBoxState,o=t.isEditing;return Object(Q.jsx)("div",{className:"",children:Object(Q.jsx)("div",{className:"markdown-controls",title:"Edit as Markdown",children:Object(Q.jsxs)("div",{className:"markdown-editing",children:[Object(Q.jsx)("span",{className:"markdown-write ".concat(o?"markdown-selected":""),onClick:function(e){e.stopPropagation(),!1===o&&n(Object(b.a)(Object(b.a)({},t),{},{isEditing:!0}))},children:"Edit"}),Object(Q.jsx)("span",{className:"markdown-preview ".concat(o?"":"markdown-selected"),onClick:function(e){e.stopPropagation(),!0===o&&n(Object(b.a)(Object(b.a)({},t),{},{isEditing:!1}))},children:"Preview"})]})})})}function Ue(e){return Object(Q.jsx)("div",{})}n(212);var _e=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).state={where:null,menuOpen:!1,shareLinkOpen:!1},o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,a=t.isActive,s=t.updateBoxState,i=t.removeBox,c=n.type,l=n.title,u=n.minimized,d=this.state.shareLinkOpen;return Object(Q.jsxs)("div",{className:"boxTopBar",onClick:function(e){return e.stopPropagation()},children:[Object(Q.jsx)("div",{className:"topBarTitle",children:Object(Q.jsx)("span",{className:"box-top-bar--title-text",contentEditable:!0,suppressContentEditableWarning:!0,onClick:function(e){e.stopPropagation()},onBlur:function(e){return s(Object(b.a)(Object(b.a)({},n),{},{title:e.target.textContent||""}))},children:l})}),Object(Q.jsx)("div",{className:"box-top-bar-custom",children:c===o.UNTYPED_LAMBDA?Object(Q.jsx)(Pe,{state:n,isActive:a,removeBox:i,updateBoxState:s}):c===o.MARKDOWN?Object(Q.jsx)(Fe,{state:n,isActive:a,removeBox:i,updateBoxState:s}):Object(Q.jsx)(Ue,{})}),Object(Q.jsxs)("div",{className:"box-top-bar-controls",children:[Object(Q.jsx)("div",{className:"box-top-bar--controls-item",onClick:i,title:"Delete this Box from the Notebook",children:Object(Q.jsx)("i",{className:"mini-icon far fa-trash-alt"})}),c!==o.MARKDOWN?Object(Q.jsx)("div",{onClick:function(e){e.stopPropagation(),s(Object(b.a)(Object(b.a)({},n),{},{minimized:!u}))},className:"box-top-bar--controls-item",title:u?"Expand this Box":"Collapse this Box",children:u?Object(Q.jsx)("i",{className:"mini-icon fas fa-expand"}):Object(Q.jsx)("i",{className:"mini-icon fas fa-compress"})}):null,Object(Q.jsx)("div",{className:"box-top-bar--controls-item",onClick:function(t){t.stopPropagation(),e.setState({shareLinkOpen:!0});var a=new URL(window.document.location.toString()).searchParams;if(a.set("type",n.type),n.type===o.UNTYPED_LAMBDA){var s,r=encodeURI(JSON.stringify(n.macrotable));a.set("source",encodeURI((null===(s=n.ast)||void 0===s?void 0:s.toString())||n.editor.content)),a.set("macros",r)}else a.set("source",encodeURI(n.editor.content));n.type===o.UNTYPED_LAMBDA&&(a.set("subtype",n.subtype),a.set("strategy",n.strategy),a.set("SDE",n.SDE.toString()),a.set("SLI",n.SLI.toString()));var i=window.location.host+"?"+a.toString();navigator.clipboard.writeText(i),setTimeout((function(){return e.setState({shareLinkOpen:!1,menuOpen:!1})}),1500)},title:"Copy the link to this Expression.",children:Object(Q.jsx)("i",{className:"mini-icon fas fa-share-alt-square"})}),Object(Q.jsx)("div",{className:"box-top-bar--controls-item",onMouseDownCapture:function(e){e.preventDefault(),e.stopPropagation()},onClick:function(t){switch(console.log("clicked on the EDIT button"),t.stopPropagation(),c){case o.UNTYPED_LAMBDA:var a=function(e){return Object(b.a)(Object(b.a)({},e),{},{subtype:r.EMPTY,title:"Untyped \u03bb Expression",minimized:!1,expression:"",ast:null,history:[],isRunning:!1,breakpoints:[],timeoutID:void 0,timeout:5,macrolistOpen:!1,macrotable:Object(b.a)({},L.macrotable),editor:{placeholder:"placeholder",content:"",caretPosition:0,syntaxError:null}})}(n),i=n.expression||n.editor.content;s(Object(b.a)(Object(b.a)({},a),{},{editor:Object(b.a)(Object(b.a)({},a.editor),{},{content:i})}));break;case o.MARKDOWN:s(Object(b.a)(Object(b.a)({},n),{},{isEditing:!0}))}e.setState({menuOpen:!1})},title:"Edit this Expression.",children:Object(Q.jsx)("i",{className:"mini-icon far fa-edit"})})]}),null,d?Object(Q.jsx)("p",{className:"box-top-bar--menu-item--notif",children:"Link Copied!"}):null]})}}]),n}(l.Component),Ye=(n(213),function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).state={modalOpen:!1},o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isActiveBox,a=t.isFocusedBox,s=t.box,r=t.makeActive,i=t.onBlur,c=t.updateBoxState,l=t.addBoxBefore,u=t.addBoxAfter,d=t.removeBox,p=this.state.modalOpen,b=function(e){switch(e){case o.UNTYPED_LAMBDA:return"untypedLambdaBox";case o.MARKDOWN:return"markDownBox";default:return""}}(s.type);return Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"boxContainer ".concat(n?"active":"inactive"," ").concat(b),onClick:r,onBlur:i,children:[Object(Q.jsx)(_e,{state:s,isActive:n,isFocused:a,removeBox:function(e){e.stopPropagation(),d()},updateBoxState:c,addBoxBefore:l,addBoxAfter:u,settings:this.props.settings,whiteList:this.props.whiteList}),Object(Q.jsx)(De,{state:s,isActive:n,isFocused:a,updateBoxState:c,addBoxAfter:u})]}),p?Object(Q.jsx)(ie,{addNew:function(t){e.props.addBoxAfter(t),e.setState({modalOpen:!1})},whiteList:this.props.whiteList,settings:this.props.settings}):Object(Q.jsx)("div",{className:"add_box_after",onMouseDown:function(){return e.setState({modalOpen:!0})},children:"+"})]})}}]),n}(l.Component)),Ve=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).insertBefore=o.insertBefore.bind(Object(j.a)(o)),o.insertAfter=o.insertAfter.bind(Object(j.a)(o)),o.removeBox=o.removeBox.bind(Object(j.a)(o)),o.updateBoxState=o.updateBoxState.bind(Object(j.a)(o)),o.makeActive=o.makeActive.bind(Object(j.a)(o)),o.onBlur=o.onBlur.bind(Object(j.a)(o)),o.createBoxFromURL=o.createBoxFromURL.bind(Object(j.a)(o)),o.setBoxState=o.setBoxState.bind(Object(j.a)(o)),o.updateURL=o.updateURL.bind(Object(j.a)(o)),o}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.state,o=t.settings,a=n.activeBoxIndex,s=n.focusedBoxIndex,r=n.boxList,i=n.allowedBoxes;return Object(Q.jsx)("div",{className:"mainSpace",children:Object(Q.jsxs)("ul",{className:"boxList UL",children:[r.map((function(t,n){return Object(Q.jsx)("li",{className:"LI",children:Object(Q.jsx)(Ye,{box:t,isActiveBox:a===n,isFocusedBox:s===n,addBoxBefore:function(t){return e.insertBefore(n,t)},addBoxAfter:function(t){return e.insertAfter(n,t)},makeActive:function(){return e.makeActive(n)},removeBox:function(){return e.removeBox(n)},updateBoxState:function(t){return e.updateBoxState(n,t)},onBlur:function(){return e.onBlur(n)},whiteList:i,settings:o})},t.__key)})),0===r.length?Object(Q.jsx)("div",{className:"top-level--create-box",children:Object(Q.jsx)(ce,{addNew:function(t){return e.insertBefore(n.boxList.length,t)},whiteList:i,settings:o})}):null]})})}},{key:"createBoxFromURL",value:function(){new URL(window.location.toString()).searchParams.get("type")}},{key:"setBoxState",value:function(e,t){}},{key:"insertBefore",value:function(e,t){var n=this.props.state.boxList,o=Object(p.a)(n);o.splice(e,0,t),this.props.updateNotebook({boxList:o,activeBoxIndex:e,focusedBoxIndex:e})}},{key:"insertAfter",value:function(e,t){var n=this.props.state.boxList;n.splice(e+1,0,t),this.props.updateNotebook({boxList:n,activeBoxIndex:e+1,focusedBoxIndex:e+1})}},{key:"removeBox",value:function(e){var t,n=this.props.state,o=n.boxList,a=n.activeBoxIndex,s=(t=e)<a?a-1:t>a?a:1===o.length?NaN:0===t?t:t-1;o.splice(e,1),this.props.updateNotebook({boxList:o,activeBoxIndex:s})}},{key:"updateBoxState",value:function(e,t){var n=this.props.state.boxList;n[e]=Object(b.a)({},t),this.updateURL(t),this.props.updateNotebook({boxList:Object(p.a)(n),activeBoxIndex:e})}},{key:"makeActive",value:function(e){var t,n=this.props.state,a=n.activeBoxIndex,s=n.focusedBoxIndex,r=n.boxList;switch(r[a].type){case o.UNTYPED_LAMBDA:break;case o.MARKDOWN:r[a]=oe(r[a])}if(e!==a||e!==s||!0===r[e].minimized){var i={minimized:!1};if(r[e].type===o.MARKDOWN)r[e]=Object(b.a)(Object(b.a)({},(t=r[e],Object(b.a)(Object(b.a)({},t),{},{isEditing:!0}))),i);else r[e]=Object(b.a)(Object(b.a)({},r[e]),i);this.updateURL(r[e]),this.props.updateNotebook({activeBoxIndex:e,focusedBoxIndex:e,boxList:r})}}},{key:"onBlur",value:function(e){var t=this.props.state,n=t.boxList;if(t.activeBoxIndex===e){switch(n[e].type){case o.UNTYPED_LAMBDA:break;case o.MARKDOWN:n[e]=oe(n[e])}this.props.updateNotebook({boxList:n,focusedBoxIndex:void 0})}}},{key:"updateURL",value:function(e){}}]),n}(l.PureComponent),ze='# User guide\n\n## Typing expressions\n#### To write lambda expression you simply type in the prompt.\n\n## Typing \u03bb symbol\n#### If you want to write `\u03bb` symbol inside of the Interactive Box - you simply type `\\` and Lambdulus will take care of the rest.\n\n#### If you need to write `\u03bb` symbol inside of the Markdown Box - you can use `&lambda;` sequence.\n\n## Multiple expressions\n#### You can also have many submitted expressions. To submit another expression you need to either click the big `+` sign in the empty notebook, or to click on the `three dots` menu and pick whether you want to open new box before or after your current Box.\n\n## Single Letter Names (SLI)\n#### You can write lambda functions and omit whitespaces such as `(\u03bbabc.cba) 2 1 +`. To do that you have to check switch `Single Letter Names` at the top of the page.\n#### You can always override the global SLI setting for the specific Box.\n\n## Evaluation Strategies\n#### We have option to select from 3 evaluation strategies. The `Simplified` strategy is specific evaluation order which evaluates built-in macros atomicaly. The `Normal` and the `Applicative` strategies are sort of self describing.\n\n## Macros\n#### In case you need to define your own macros, you can do that in the same prompt you use to input lambda expression. Each Macro Definition consists of the name of the macro followed by `:=` symbol and the lambda expression. Note that between each macro definition and the following term (either another macro or the lambda expression to evaluate) you must put `;` as a delimiter.\n#### Also note that each Box has it\'s own namespace, macros in one Box are not accessible in other Boxes.\n\n## Macro Definition\n#### Inside the macro definition you can reference any valid macro which is already defined or will be defined in the future. You can, in fact, reference the same macro you are currently defining inside it\'s own definition - whether you should do it or not is up to you.\n\n## List All Macros\n#### If you want to list all defined macros - built-ins and also your macros - you simply click on the *list resembling* icon at the right top of the Box.\n\n## Remove or Redefine User Macro\n#### To remove or rewrite your macros - `because you can not remove built-ins` - you need to click on the "pencil" icon at the top right part of the Box. That will reset the Box back to the "editor stage", you can now modify your macros and evaluate the expression again. You might also need want to rewrite your lambda expression in case it references the macro being removed.\n\n## Report a Bug or Request New Features\n#### If you want to report a bug or you need some feature - click on the `Issues` button on the left or at the top of the page. Then fill in the issue on the GitHub page of the project. Definitely don\'t forget to check if the corresponding issue already exist.\n';function We(e){return window.guide=ze,Object(Q.jsxs)("div",{className:"helpSpace",children:[Object(Q.jsx)(Ce.a,{className:"markdown-body",children:ze}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),"version: ".concat("03-12-22-14:11:18"),Object(Q.jsx)("br",{}),"commit hash: ".concat("5e061790ee3a3bfced6745753c336074a7570cd2")]})}function He(e){var t=e.settings,n=e.updateSettings,o=t[M];return Object(Q.jsxs)("div",{className:"settingsSpace",children:[Object(Q.jsx)("h2",{children:"Settings for Untyped Lambda Calculus:"}),Object(Q.jsx)(Se,{settings:o,settingsEnabled:B,change:function(e){return n(Object(b.a)(Object(b.a)({},t),{},Object(x.a)({},M,e)))}})]})}n(214);function Ke(e){var t=e.state,n=e.onSelectNotebook,o=e.onRemoveNotebook,a=e.onUpdateNotebook,s=e.onAddNotebook,r=t.notebookList;return Object(Q.jsx)("div",{className:"mainSpace",children:Object(Q.jsxs)("ul",{className:"notebook-list UL",children:[Object(Q.jsx)("li",{className:"LI cursor-pointer notebook-list--add-notebook cursor-pointer notebook-list--notebook",onClick:function(e){e.stopPropagation();var t=prompt("Please Write the Name of New Notebook");null===t||s(t)},children:Object(Q.jsx)("div",{className:"notebook-list--add-notebook--container",children:Object(Q.jsx)("i",{className:"mini-icon fas fa-plus"})})}),r.map((function(e,t){return Object(Q.jsxs)("li",{className:"LI cursor-pointer notebook-list--notebook",onClick:function(){return n(t)},children:[Object(Q.jsx)("div",{className:"notebook-list--notebook-thumbnal",children:Object(Q.jsx)(Ve,{state:e,settings:e.settings,updateNotebook:function(){}})}),Object(Q.jsxs)("div",{className:"notebook-list--notebook-footer",children:[Object(Q.jsx)("span",{className:"notebook-list--notebook-footer--title",children:e.name}),Object(Q.jsx)("div",{className:"notebook-list--notebook-footer--menu",children:Object(Q.jsx)("div",{onClick:function(n){n.stopPropagation(),a(Object(b.a)(Object(b.a)({},e),{},{menuOpen:!e.menuOpen}),t)},className:"notebook-list--notebook--menu--dots ".concat(e.menuOpen?"menu-pressed-open":""),children:Object(Q.jsx)("i",{className:"mini-icon fas fa-ellipsis-v"})})})]}),e.menuOpen?Object(Q.jsxs)("div",{className:"notebook-list--notebook--menu",ref:function(e){if(null!==e){var t=e.getBoundingClientRect(),n=window.innerHeight;t.bottom>n&&e.scrollIntoView(!1)}},children:[Object(Q.jsx)("div",{className:"box-top-bar--menu-item",onClick:function(e){e.stopPropagation(),o(t)},children:"Remove"}),Object(Q.jsx)("div",{className:"box-top-bar--menu-item",onClick:function(n){n.stopPropagation();var o=prompt("Please Enter New Name for the Notebook");a(null!==o&&""!==o?Object(b.a)(Object(b.a)({},e),{},{name:o,menuOpen:!1}):Object(b.a)(Object(b.a)({},e),{},{menuOpen:!1}),t)},children:"Rename"})]}):null]},e.__key)}))]})})}var Ge=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),a=t.call(this,e),console.log("VERSION: ".concat("03-12-22-14:11:18")),console.log("COMMIT: ".concat("5e061790ee3a3bfced6745753c336074a7570cd2")),a.state=q(),function(e){for(var t=e.currentNotebook,n=e.notebookList[t],a=0,s=Object.entries(n.integrationStates);a<s.length;a++){var r=Object(v.a)(s[a],2),i=r[0],c=r[1];if(i===o.UNTYPED_LAMBDA)return void(c.macrotable=L.macrotable)}}(a.state),a.setScreen=a.setScreen.bind(Object(j.a)(a)),a.updateNotebook=a.updateNotebook.bind(Object(j.a)(a)),a.changeNotebook=a.changeNotebook.bind(Object(j.a)(a)),a.addNotebook=a.addNotebook.bind(Object(j.a)(a)),a.removeNotebook=a.removeNotebook.bind(Object(j.a)(a)),a.editNotebookName=a.editNotebookName.bind(Object(j.a)(a)),a.changeNotebookName=a.changeNotebookName.bind(Object(j.a)(a)),a.stopEditingNotebook=a.stopEditingNotebook.bind(Object(j.a)(a)),a.updateSettings=a.updateSettings.bind(Object(j.a)(a)),a.importNotebook=a.importNotebook.bind(Object(j.a)(a)),a.clearWorkspace=a.clearWorkspace.bind(Object(j.a)(a)),a.selectNotebook=a.selectNotebook.bind(Object(j.a)(a)),a.updateNthNotebook=a.updateNthNotebook.bind(Object(j.a)(a)),a.createNotebookFromURL=a.createNotebookFromURL.bind(Object(j.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.createNotebookFromURL()}},{key:"createNotebookFromURL",value:function(){var e=new URL(window.location.toString()).searchParams,t=e.get("type");if(null!==t&&t===o.UNTYPED_LAMBDA){var n=e.get("source"),s=e.get("macros"),i=e.get("subtype"),l=e.get("strategy"),u=e.get("SDE"),d=e.get("SLI");if(null===n||null==s||null===i||null===l||null===u||null===d)return;var h=c.NORMAL===l?c.NORMAL:c.APPLICATIVE,m="true"===d,j=Object(b.a)(Object(b.a)({},R),{},{strategy:h,SDE:"true"===u,SLI:m}),O=i===r.EMPTY?r.EMPTY:i===r.ORDINARY?r.ORDINARY:i===r.EXERCISE?r.EXERCISE:r.EMPTY;try{var f=JSON.parse(decodeURI(s)),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Notebook from Link";return{boxList:[arguments.length>1?arguments[1]:void 0],activeBoxIndex:0,focusedBoxIndex:0,allowedBoxes:H,settings:$(),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:e,editingName:!1,persistent:!0}}("Notebook from Link",T(decodeURI(n),j,O,f));this.setState({currentScreen:a.MAIN,notebookList:[v].concat(Object(p.a)(this.state.notebookList)),currentNotebook:0}),window.history.pushState(null,"","/"),X(Object(b.a)(Object(b.a)({},this.state),{},{currentScreen:a.MAIN,notebookList:[].concat(Object(p.a)(this.state.notebookList),[v]),currentNotebook:this.state.notebookList.length-1}))}catch(x){window.history.replaceState(null,"","/")}}}},{key:"render",value:function(){var e=this,t=this.state,n=t.notebookList,o=t.currentNotebook,s=t.currentScreen,r=n[o],i=r.settings;return Object(Q.jsxs)("div",{id:"app",children:[Object(Q.jsx)("div",{id:"bad-screen-message",children:"Lambdulus only runs on screens at least 900 pixels wide."}),Object(Q.jsx)(ee,{state:this.state,onScreenChange:this.setScreen,onImport:this.importNotebook,onClearWorkspace:this.clearWorkspace}),Object(Q.jsx)(te,{state:this.state,onScreenChange:this.setScreen}),function(){switch(s){case a.MAIN:return Object(Q.jsx)(Ve,{state:r,updateNotebook:e.updateNotebook,settings:i});case a.NOTEBOOKS:return Object(Q.jsx)(Ke,{state:e.state,onSelectNotebook:e.selectNotebook,onRemoveNotebook:e.removeNotebook,onUpdateNotebook:e.updateNthNotebook,onAddNotebook:e.addNotebook});case a.HELP:return Object(Q.jsx)(We,{});case a.SETTINGS:return Object(Q.jsx)(He,{settings:i,updateSettings:e.updateSettings})}}()]})}},{key:"selectNotebook",value:function(e){this.setState({currentScreen:a.MAIN,currentNotebook:e}),X(Object(b.a)(Object(b.a)({},this.state),{},{currentScreen:a.MAIN,currentNotebook:e}))}},{key:"setScreen",value:function(e){this.setState({currentScreen:e})}},{key:"updateNotebook",value:function(e){var t=this.state,n=t.notebookList,o=t.currentNotebook;n[o]=Object(b.a)(Object(b.a)({},n[o]),e),this.setState({notebookList:n}),J(n[o],o)}},{key:"updateNthNotebook",value:function(e,t){var n=this.state.notebookList;n[t]=e,this.setState({notebookList:n}),J(e,t)}},{key:"changeNotebook",value:function(e){this.setState({currentNotebook:e}),X(Object(b.a)(Object(b.a)({},this.state),{},{currentNotebook:e}))}},{key:"addNotebook",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({notebookList:[].concat(Object(p.a)(this.state.notebookList),[$e(e)]),currentNotebook:this.state.currentNotebook+1}),X(Object(b.a)(Object(b.a)({},this.state),{},{currentScreen:a.MAIN,notebookList:[].concat(Object(p.a)(this.state.notebookList),[$e(e)]),currentNotebook:this.state.currentNotebook+1}))}},{key:"importNotebook",value:function(e){this.setState({notebookList:[].concat(Object(p.a)(this.state.notebookList),[e]),currentNotebook:this.state.currentNotebook+1}),X(Object(b.a)(Object(b.a)({},this.state),{},{notebookList:[].concat(Object(p.a)(this.state.notebookList),[e]),currentNotebook:this.state.currentNotebook+1}))}},{key:"removeNotebook",value:function(e){var t,n=this.state,o=n.notebookList,a=n.currentNotebook,s=(t=e)<a?a-1:t>a?a:1===o.length?NaN:0===t?t:t-1;Number.isNaN(s)||(o.splice(e,1),this.setState({notebookList:o,currentNotebook:s}),X(Object(b.a)(Object(b.a)({},this.state),{},{notebookList:o,currentNotebook:s})))}},{key:"editNotebookName",value:function(e){var t=this.state.notebookList,n=t[e];t[e]=Object(b.a)(Object(b.a)({},n),{},{editingName:!0,persistent:!0}),this.setState({notebookList:t}),J(n,e)}},{key:"changeNotebookName",value:function(e,t){var n=this.state.notebookList,o=n[e];n[e]=Object(b.a)(Object(b.a)({},o),{},{name:t}),this.setState({notebookList:n}),J(o,e)}},{key:"stopEditingNotebook",value:function(e){var t=this.state.notebookList,n=t[e];t[e]=Object(b.a)(Object(b.a)({},n),{},{editingName:!1}),this.setState({notebookList:t}),J(n,e)}},{key:"updateSettings",value:function(e){var t,n=this.state,o=n.currentNotebook,a=n.notebookList;a[o].settings=e,this.setState({notebookList:Object(p.a)(a)}),t=e,window.localStorage.setItem("global-settings",JSON.stringify(t))}},{key:"clearWorkspace",value:function(){if(window.confirm("This will delete this whole Notebook from your browser's memory.\n\n                                          Are you sure?")){var e=this.state,t=e.currentNotebook,n=e.notebookList;n[t]=K,this.setState({notebookList:n}),J(K,t)}}}]),n}(l.Component);function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Anonymous Notebook";return{boxList:[],activeBoxIndex:NaN,focusedBoxIndex:void 0,allowedBoxes:H,settings:$(),integrationStates:{UNTYPED_LAMBDA:L},locked:!1,menuOpen:!1,__key:Date.now().toString(),name:e,editingName:!1,persistent:!0}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(Object(Q.jsx)(Ge,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){},84:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[215,1,2]]]);
//# sourceMappingURL=main.9dd93d27.chunk.js.map